if (self.CavalryLogger) { CavalryLogger.start_js(["7D8VJYU"]); }

__d("PagesManagerInboxTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:PagesManagerInboxLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:PagesManagerInboxLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:PagesManagerInboxLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAutomatedResponseTriggerType=function(a){this.$1.automated_response_trigger_type=a;return this};c.setBroadcastAudience=function(a){this.$1.broadcast_audience=a;return this};c.setBroadcastMessageFormat=function(a){this.$1.broadcast_message_format=a;return this};c.setEventName=function(a){this.$1.event_name=a;return this};c.setFirstPayloadTime=function(a){this.$1.first_payload_time=a;return this};c.setFolder=function(a){this.$1.folder=a;return this};c.setHadError=function(a){this.$1.had_error=a;return this};c.setHref=function(a){this.$1.href=a;return this};c.setIsCached=function(a){this.$1.is_cached=a;return this};c.setIsInboxRedesignWithSideNav=function(a){this.$1.is_inbox_redesign_with_side_nav=a;return this};c.setItemsCount=function(a){this.$1.items_count=a;return this};c.setLoadTime=function(a){this.$1.load_time=a;return this};c.setMessage=function(a){this.$1.message=a;return this};c.setModuleName=function(a){this.$1.module_name=a;return this};c.setNuxID=function(a){this.$1.nux_id=a;return this};c.setPageCommItemID=function(a){this.$1.page_comm_item_id=a;return this};c.setPageCommItemStatus=function(a){this.$1.page_comm_item_status=a;return this};c.setPageCommSearch=function(a){this.$1.page_comm_search=a;return this};c.setPageCommSearchType=function(a){this.$1.page_comm_search_type=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPlatform=function(a){this.$1.platform=a;return this};c.setScreenHeight=function(a){this.$1.screen_height=a;return this};c.setScreenWidth=function(a){this.$1.screen_width=a;return this};c.setStackTrace=function(a){this.$1.stack_trace=a;return this};c.setThreadToken=function(a){this.$1.thread_token=a;return this};c.setTimeSinceLoad=function(a){this.$1.time_since_load=a;return this};c.setTraceID=function(a){this.$1.trace_id=a;return this};c.setUsesStreamingPagination=function(a){this.$1.uses_streaming_pagination=a;return this};c.setViewMode=function(a){this.$1.view_mode=a;return this};return a}();c={automated_response_trigger_type:!0,broadcast_audience:!0,broadcast_message_format:!0,event_name:!0,first_payload_time:!0,folder:!0,had_error:!0,href:!0,is_cached:!0,is_inbox_redesign_with_side_nav:!0,items_count:!0,load_time:!0,message:!0,module_name:!0,nux_id:!0,page_comm_item_id:!0,page_comm_item_status:!0,page_comm_search:!0,page_comm_search_type:!0,page_id:!0,platform:!0,screen_height:!0,screen_width:!0,stack_trace:!0,thread_token:!0,time_since_load:!0,trace_id:!0,uses_streaming_pagination:!0,view_mode:!0};f["default"]=a}),66);
__d("PagesMessagingInboxActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:PagesMessagingInboxActionsLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:PagesMessagingInboxActionsLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:PagesMessagingInboxActionsLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setInboxAction=function(a){this.$1.inbox_action=a;return this};c.setPageCommSearchType=function(a){this.$1.page_comm_search_type=a;return this};c.setPlatform=function(a){this.$1.platform=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={inbox_action:!0,page_comm_search_type:!0,platform:!0};f["default"]=a}),66);
__d("MessengerUserProfileLocationUtilsQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="2746984198655487"}),null);
__d("MessengerUserProfileLocationUtilsQuery.graphql",["MessengerUserProfileLocationUtilsQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,concreteType:"StreetAddress",kind:"LinkedField",name:"address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MessengerUserProfileLocationUtilsQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MessengerUserProfileLocationUtilsQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("MessengerUserProfileLocationUtilsQuery_facebookRelayOperation"),metadata:{},name:"MessengerUserProfileLocationUtilsQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("ChatPluginSendMessageMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4005392926227039"}),null);
__d("ChatPluginSendMessageMutation.graphql",["ChatPluginSendMessageMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{kind:"Variable",name:"data",variableName:"input"}],d={alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"ChatPluginSendMessageMutation",selections:[{alias:null,args:c,concreteType:"ChatPluginSendMessageResponsePayload",kind:"LinkedField",name:"chat_plugin_send_message",plural:!1,selections:[d,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message",plural:!1,selections:[e,f],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ChatPluginSendMessageMutation",selections:[{alias:null,args:c,concreteType:"ChatPluginSendMessageResponsePayload",kind:"LinkedField",name:"chat_plugin_send_message",plural:!1,selections:[d,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"message",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},e,f,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Node",abstractKey:"__isNode"}],storageKey:null}],storageKey:null}]},params:{id:b("ChatPluginSendMessageMutation_facebookRelayOperation"),metadata:{},name:"ChatPluginSendMessageMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("LiveChatPluginUserContactQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4916594698351696"}),null);
__d("LiveChatPluginUserContactQuery.graphql",["LiveChatPluginUserContactQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,concreteType:"Phone",kind:"LinkedField",name:"all_phones",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_preferred",storageKey:null},{alias:null,args:null,concreteType:"PhoneNumber",kind:"LinkedField",name:"phone_number",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"universal_number",storageKey:null}],storageKey:null}],storageKey:null},c={alias:null,args:null,concreteType:"Email",kind:"LinkedField",name:"all_emails",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"display_email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_primary",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LiveChatPluginUserContactQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a],storageKey:null},c],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"LiveChatPluginUserContactQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},c],storageKey:null}]},params:{id:b("LiveChatPluginUserContactQuery_facebookRelayOperation"),metadata:{},name:"LiveChatPluginUserContactQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("LivechatPluginGuestMessageThreadQueryContainerQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4593972464057524"}),null);
__d("LivechatPluginGuestMessageThreadQueryContainerQuery.graphql",["LivechatPluginGuestMessageThreadQueryContainerQuery_facebookRelayOperation"],(function(a,aa,b,c,d,e){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"data"}],b=[{kind:"Variable",name:"data",variableName:"data"}],c={alias:null,args:null,kind:"ScalarField",name:"folder",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"unread_count",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"messages_count",storageKey:null},f={alias:"last_read_receipt",args:[{kind:"Literal",name:"last",value:1}],concreteType:"MessagingReadReceiptsOfThreadConnection",kind:"LinkedField",name:"read_receipts",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagingReadReceipt",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:"action",args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null},{alias:"watermark",args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null}],storageKey:null}],storageKey:"read_receipts(last:1)"},g={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},h={alias:null,args:null,concreteType:"MessagingParticipant",kind:"LinkedField",name:"message_sender",plural:!1,selections:[g,{alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null}],storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},j={alias:null,args:null,concreteType:"MessageSourceData",kind:"LinkedField",name:"message_source_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message_source",storageKey:null}],storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"tags_list",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"offline_threading_id",storageKey:null},m={alias:null,args:null,concreteType:"MessageThreadKey",kind:"LinkedField",name:"message_thread_key",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"thread_fbid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"other_user_id",storageKey:null}],storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"platform_xmd_encoded",storageKey:null},p={alias:null,args:null,concreteType:"MessageReaction",kind:"LinkedField",name:"message_reactions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reaction",storageKey:null}],storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"is_sponsored",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"is_user_generated",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"snippet",storageKey:null},t={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"extensible_message_admin_text_type",storageKey:null},s],type:"GenericAdminTextMessage",abstractKey:null},u=[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],v={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:u,storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},x={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"file_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},w],type:"MessageFile",abstractKey:null},y={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},B={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[y,z,A],storageKey:null},C={kind:"InlineFragment",selections:[B,w],type:"MessageImage",abstractKey:null},D={alias:null,args:null,kind:"ScalarField",name:"legacy_attachment_id",storageKey:null},E={alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"original_dimensions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"playable_url",storageKey:null};B={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"video_type",storageKey:null},D,E,F,w,B],type:"MessageVideo",abstractKey:null};var G=[z,y,A];D={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"animated_image",plural:!1,selections:G,storageKey:null},D,E,F,w,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:G,storageKey:null}],type:"MessageAnimatedImage",abstractKey:null};E={alias:null,args:null,kind:"ScalarField",name:"unread",storageKey:null};G={alias:null,args:null,kind:"ScalarField",name:"action_url",storageKey:null};var H=[G,{alias:null,args:null,kind:"ScalarField",name:"target_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}];H={alias:null,args:null,concreteType:"MessengerGenericXMATemplateExtraFields",kind:"LinkedField",name:"messenger_generic_xma_template_extra_info",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerGenericXMATemplateCTA",kind:"LinkedField",name:"cta1",plural:!1,selections:H,storageKey:null},{alias:null,args:null,concreteType:"MessengerGenericXMATemplateCTA",kind:"LinkedField",name:"cta2",plural:!1,selections:H,storageKey:null},{alias:null,args:null,concreteType:"MessengerGenericXMATemplateCTA",kind:"LinkedField",name:"cta3",plural:!1,selections:H,storageKey:null},{alias:null,args:null,concreteType:"MessengerGenericXMATemplateCTA",kind:"LinkedField",name:"default_cta",plural:!1,selections:H,storageKey:null}],storageKey:null};var I={alias:null,args:null,kind:"ScalarField",name:"deduplication_key",storageKey:null},J={alias:null,args:null,kind:"ScalarField",name:"style_list",storageKey:null},K={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"source",plural:!1,selections:u,storageKey:null};y=[y,A,z];var L={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:y,storageKey:null};y={alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"animated_image",plural:!1,selections:y,storageKey:null};var M={alias:null,args:null,kind:"ScalarField",name:"is_playable",storageKey:null},N={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[L,y,M],storageKey:null},O=[g],P={alias:null,args:null,kind:"ScalarField",name:"subtitle",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"template_type",storageKey:null},R={alias:null,args:null,kind:"ScalarField",name:"image_width",storageKey:null};G=[g,{alias:null,args:null,kind:"ScalarField",name:"page_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_disabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_mutable_by_server",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cta_render_style",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"action_open_type",storageKey:null},G,{alias:null,args:null,kind:"ScalarField",name:"action_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"logging_token",storageKey:null}];var S={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"call_to_actions",plural:!0,selections:G,storageKey:null};G={alias:null,args:null,concreteType:"MessengerCallToAction",kind:"LinkedField",name:"default_action",plural:!1,selections:G,storageKey:null};F={kind:"InlineFragment",selections:[F,z,A,g],type:"Video",abstractKey:null};z={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null};A={alias:null,args:null,kind:"ScalarField",name:"image_url",storageKey:null};var T={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},U={alias:null,args:null,kind:"ScalarField",name:"first_metaline",storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"second_metaline",storageKey:null},W={alias:null,args:null,kind:"ScalarField",name:"third_metaline",storageKey:null},X={alias:null,args:null,kind:"ScalarField",name:"image_aspect_ratio",storageKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"target_url",storageKey:null},ba={alias:null,args:null,kind:"ScalarField",name:"source_name",storageKey:null};u={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title_with_entities",plural:!1,selections:u,storageKey:null};var Z={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},$={kind:"InlineFragment",selections:O,type:"Node",abstractKey:"__isNode"},ca={kind:"InlineFragment",selections:O,type:"GenericAttachmentMedia",abstractKey:null},da={kind:"InlineFragment",selections:O,type:"MontageImage",abstractKey:null},ea={kind:"InlineFragment",selections:O,type:"MontageVideo",abstractKey:null};L={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[Z,L,y,M,$,ca,da,ea],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LivechatPluginGuestMessageThreadQueryContainerQuery",selections:[{alias:null,args:b,concreteType:"MessageThread",kind:"LinkedField",name:"guest_message_thread",plural:!1,selections:[c,d,e,f,{alias:null,args:null,concreteType:"MessagesOfThreadConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[h,i,j,k,l,m,n,o,p,q,r,t,{kind:"InlineFragment",selections:[v,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_attachments",plural:!0,selections:[x,C,B,D],storageKey:null},E,{alias:null,args:null,concreteType:"ExtensibleMessageAttachment",kind:"LinkedField",name:"extensible_attachment",plural:!1,selections:[g,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[H,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"subattachments",plural:!0,selections:[I,J,K,N,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:O,storageKey:null}],storageKey:null},I,J,K,N,P,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[g,{kind:"InlineFragment",selections:[Q,w,R,s,S,{alias:null,args:null,concreteType:"MessengerBusinessMessageItemsConnection",kind:"LinkedField",name:"business_items",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerRetailItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[S,G,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_blob_attachments",plural:!0,selections:[F],storageKey:null},z,A,T,U,V,W,g,X,Y,ba],storageKey:null}],storageKey:null}],type:"MessengerBusinessMessage",abstractKey:null}],storageKey:null},u],storageKey:null}],storageKey:null}],type:"UserMessage",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LivechatPluginGuestMessageThreadQueryContainerQuery",selections:[{alias:null,args:b,concreteType:"MessageThread",kind:"LinkedField",name:"guest_message_thread",plural:!1,selections:[c,d,e,f,{alias:null,args:null,concreteType:"MessagesOfThreadConnection",kind:"LinkedField",name:"messages",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[Z,h,i,j,k,l,m,n,o,p,q,r,t,{kind:"InlineFragment",selections:[v,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_attachments",plural:!0,selections:[Z,x,C,B,D,$],storageKey:null},E,{alias:null,args:null,concreteType:"ExtensibleMessageAttachment",kind:"LinkedField",name:"extensible_attachment",plural:!1,selections:[g,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"story_attachment",plural:!1,selections:[H,{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"subattachments",plural:!0,selections:[I,J,K,L,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[Z,g],storageKey:null}],storageKey:null},I,J,K,L,P,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"target",plural:!1,selections:[Z,g,{kind:"InlineFragment",selections:[Q,w,R,s,S,{alias:null,args:null,concreteType:"MessengerBusinessMessageItemsConnection",kind:"LinkedField",name:"business_items",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerRetailItem",kind:"LinkedField",name:"nodes",plural:!0,selections:[S,G,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_blob_attachments",plural:!0,selections:[Z,F,$,ca,da,ea],storageKey:null},z,A,T,U,V,W,g,X,Y,ba],storageKey:null}],storageKey:null}],type:"MessengerBusinessMessage",abstractKey:null}],storageKey:null},u],storageKey:null}],storageKey:null}],type:"UserMessage",abstractKey:null},$],storageKey:null}],storageKey:null},g],storageKey:null}]},params:{id:aa("LivechatPluginGuestMessageThreadQueryContainerQuery_facebookRelayOperation"),metadata:{},name:"LivechatPluginGuestMessageThreadQueryContainerQuery",operationKind:"query",text:null}}}();d.exports=a}),null);
__d("FBCarouselArrow.react",["cx","ix","xuiglyph","CenteredContainer.react","Image.react","Locale","joinClasses","prop-types","react"],(function(a,b,c,d,e,f,g,h,i,j){var k=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.$1=function(){var a=i("88862"),b=i("88874");if(d("Locale").isRTL()){var e=[b,a];a=e[0];b=e[1]}return c.props.direction==="forward"?b:a},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.render=function(){var a=c("joinClasses")(this.props.className,"_10sf"+(this.props.fullBleed?" _5x5-":"")+(this.props.direction==="forward"?" _5x5_":"")+(this.props.direction==="backward"?" _5x60":""));return k.jsx("div",babelHelpers["extends"]({},this.props,{className:a,children:k.jsx(c("CenteredContainer.react"),{className:"_5x6d",vertical:!0,children:k.jsx(c("Image.react"),{className:"_3-8w",src:this.$1()})})}))};return b}(k.Component);a.propTypes={direction:c("prop-types").oneOf(["forward","backward"]).isRequired,fullBleed:c("prop-types").bool};g["default"]=a}),98);
__d("AdsArrowedContainer.react",["fbt","invariant","FBCarouselArrow.react","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","Link.react","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a=this.$1("left"),b=this.$1("right");a=this.$2(this.props.isLeftArrowOverlappingContent?"left":"leftOfChild",a);b=this.$2("right",b);return j.jsxs(c("FBOverlayContainer.react"),babelHelpers["extends"]({},this.props,{children:[j.jsx(c("FBOverlayBase.react"),{children:this.props.children}),a,b]}))};d.$1=function(a){var b,d;switch(a){case"left":b=this.props.onDecrement!==null;d=this.props.onDecrement;break;case"right":b=this.props.onIncrement!==null;d=this.props.onIncrement;break;default:i(0,6086,a)}return!b?null:j.jsx(c("Link.react"),{"aria-label":a==="left"?h._(/*FBT_CALL*/"navigate backwards"/*FBT_CALL*/):h._(/*FBT_CALL*/"navigate forwards"/*FBT_CALL*/),className:this.props.isArrowCentered?"":"bo3vj1wz",onClick:d,children:j.jsx(c("FBCarouselArrow.react"),{direction:a==="left"?"backward":"forward",fullBleed:a==="left"&&this.props.isLeftArrowOverlappingContent})})};d.$2=function(a,b){if(b!=null)if(this.props.isArrowCentered)return j.jsx(c("FBOverlayElement.react"),{horizontal:a,vertical:"middle",children:b});else return j.jsx(c("FBOverlayElement.react"),{horizontal:a,children:b});return null};return b}(j.Component);a.defaultProps={isArrowCentered:!1,isLeftArrowOverlappingContent:!0};g["default"]=a}),98);
__d("AdsCarousel.react",["cx","FlexLayout.react","Locale","ReactDOM","ResponsiveBlock.react","clamp","emptyFunction","joinClasses","prop-types","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={computedOffset:0},c.$5=function(a,b){c.$1(c.props.index)},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidMount=function(){this.$1(this.props.index)};e.componentDidUpdate=function(){this.$1(this.props.index)};e.$1=function(a){if(!d("ReactDOM").findDOMNode(this))return;var b=d("ReactDOM").findDOMNode(this),e=d("ReactDOM").findDOMNode(this.refs.inner);if(!(b instanceof HTMLElement)||!(e instanceof HTMLElement))return;b=b.offsetWidth;e=e.offsetWidth;e=Math.max(e-b,0);b=0;for(var f=0;f<a&&b<e;f++){var g=this.$2(f);g&&(b+=g.offsetWidth)}b=c("clamp")(b,0,e);if(b!==this.state.computedOffset)this.setState({computedOffset:b});else{g=this.props.onUpdated;g&&g(this.$3())}};e.$4=function(a){var b=0;for(var c=0;c<a;c++){var d=this.$2(c);d&&(b+=d.offsetWidth)}return b};e.$2=function(a){a=this.refs["child_"+a];var b=d("ReactDOM").findDOMNode(a);return a&&b instanceof HTMLElement?b:null};e.render=function(){var a=i.Children.map(this.props.children,function(a,b){return i.jsx("div",{className:"_2zgz",ref:"child_"+b,children:a},b)}),b=null;if(this.state.computedOffset){var e=String(-this.state.computedOffset)+"px";b=d("Locale").isRTL()?{right:e}:{left:e}}return i.jsx(c("ResponsiveBlock.react"),{onResize:this.$5,children:i.jsx("div",babelHelpers["extends"]({},this.props,{className:c("joinClasses")(this.props.className,"_a28"),children:i.jsx("div",{className:"_a2e",ref:"inner",style:b,children:this.props.itemsFillHeight?i.jsx(c("FlexLayout.react"),{align:"stretch",direction:"horizontal",children:a}):a})}))})};e.$3=function(){var a=d("ReactDOM").findDOMNode(this),b=this.state.computedOffset;a instanceof HTMLElement&&(b+=a.offsetWidth);a=this.$4(this.props.index);var c=0,e=this.props.index,f=null;while(f=this.$2(e++))if(d("Locale").isRTL())if(a+f.offsetWidth<=b)c++,a+=f.offsetWidth;else break;else if(f.offsetLeft+f.offsetWidth<=b)c++;else break;return c};return b}(i.Component);a.propTypes={index:c("prop-types").number.isRequired,itemsFillHeight:c("prop-types").bool,onUpdated:c("prop-types").func};a.defaultProps={onUpdated:c("emptyFunction"),itemsFillHeight:!1};g["default"]=a}),98);
__d("AdsArrowedCarouselEnhanced.react",["AdsArrowedContainer.react","AdsCarousel.react","prop-types","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={firstVisibleIndex:0,visibleChildrenCount:0},c.$5=function(){var a=c.$4();c.setState({firstVisibleIndex:c.state.firstVisibleIndex-a})},c.$6=function(){var a=c.$3();c.setState({firstVisibleIndex:c.state.firstVisibleIndex+a})},c.$7=function(a){c.setState({visibleChildrenCount:a})},b)||babelHelpers.assertThisInitialized(c)}var d=b.prototype;d.UNSAFE_componentWillReceiveProps=function(a){if(!a.currentSelectedShouldVisible)return;a=a.currentSelectedIndex;if(this.$1(a))this.setState({firstVisibleIndex:a});else if(this.$2(a)){var b=this.state.firstVisibleIndex+this.state.visibleChildrenCount-1;a=a-b;this.setState({firstVisibleIndex:this.state.firstVisibleIndex+a})}};d.$1=function(a){return a<this.state.firstVisibleIndex};d.$2=function(a){var b=this.state.firstVisibleIndex+this.state.visibleChildrenCount-1;return a>b};d.render=function(){var a=this.$3(),b=this.$4();return h.jsx(c("AdsArrowedContainer.react"),{className:this.props.className,isArrowCentered:!0,isLeftArrowOverlappingContent:this.props.isLeftArrowOverlappingContent!=null?this.props.isLeftArrowOverlappingContent:!0,onDecrement:b?this.$5:null,onIncrement:a?this.$6:null,children:h.jsx(c("AdsCarousel.react"),{index:this.state.firstVisibleIndex,onUpdated:this.$7,children:this.props.children})})};d.$3=function(){var a=this.state.visibleChildrenCount;a=h.Children.count(this.props.children)-this.state.firstVisibleIndex-a;return a<=0?0:Math.min(a,this.props.maxChangeAmount||1)};d.$4=function(){return Math.min(this.state.firstVisibleIndex,this.props.maxChangeAmount||1)};return b}(h.PureComponent);a.propTypes={currentSelectedIndex:c("prop-types").number,currentSelectedShouldVisible:c("prop-types").bool,maxChangeAmount:c("prop-types").number};a.defaultProps={currentSelectedIndex:0,currentSelectedShouldVisible:!1,maxChangeAmount:1};g["default"]=a}),98);
__d("MessengerHotlikeEmoji.re",["MessengerHotlikeEmoji.bs"],(function(a,b,c,d,e,f){a=b("MessengerHotlikeEmoji.bs").isMessengerHotlike;f.isMessengerHotlike=a}),null);
__d("messengerIterateEmoji",["MessengerSupportedEmoji","ifRequired"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f){var g=String(a);while(g){a=c("ifRequired")("MessengerSupportedEmojiUtils",function(a){return a.getEmojiMatchObj(g)},function(){return d("MessengerSupportedEmoji").getEmojiMatchObj(g)});if(a){var h=a.offset+a.length,i=g.substr(0,a.is_supported?a.offset:h);e(i);a.is_supported&&b(a.emoji_str,a.emoji_key,f);i=g.substr(h);g=i}else break}e(g)}g["default"]=a}),98);
__d("messengerIterateEmoticons",["EmoticonEmojiList"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){var f,g,h;a=String(a);while(a){g=d("EmoticonEmojiList").regexp.exec(a);if(g)f=g.index+g[1].length,h=a.substr(0,f),g=g[2],f=a.substr(f+g.length),c(h),b(g,d("EmoticonEmojiList").names[g],e),a=f;else break}c(a)}g["default"]=a}),98);
__d("MessengerTextWithEmoticons.react",["cx","fbt","BaseTextWithDecoration.react","EmojiImageURL","EmoticonEmojiList","FBEmojiResource","Image.react","MessengerHotlikeEmoji.re","messengerIterateEmoji","messengerIterateEmoticons","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");function k(a,b,e,f,g){var h=f===!0?128:16;g=g!=null?g:!a&&!d("MessengerHotlikeEmoji.re").isMessengerHotlike(e)?new(c("FBEmojiResource"))(e).getImageURL(h):d("EmojiImageURL").getMessengerURL(e,h);a=f===!0?"_1ift _5m3a":"_1ift _2560";return j.jsx(c("Image.react"),{alt:b,className:a,src:g})}k.displayName=k.name+" [from "+f.id+"]";function l(a,b,e){var f=e===!0?128:16,g=d("EmoticonEmojiList").emote2emojis[b],h=g?d("MessengerHotlikeEmoji.re").isMessengerHotlike(g)?d("EmojiImageURL").getMessengerURL(g,f):new(c("FBEmojiResource"))(g).getImageURL(f):null;if(h!=null&&h!==""){g=String.fromCodePoint(parseInt(g,f));f=e===!0?"_1ift _5m3a":"_1ift _2560";return j.jsx(c("Image.react"),{alt:g,className:f,src:h})}e=i._(/*FBT_CALL*/"{emoticonName} emoticon"/*FBT_CALL*/,[i._param("emoticonName",b)]);return j.jsx("span",{"aria-label":e,children:a})}l.displayName=l.name+" [from "+f.id+"]";function m(a,b,c){return function(d,e,f){var g=function(c,d,a){e(b(c,d,a))};a(String(d),g,f,c)}}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.shouldComponentUpdate=function(a){return a.text!==this.props.text};d.render=function(){var a=[m(c("messengerIterateEmoji"),k.bind(null,!!this.props.forceMessengerEmoji),this.props.customSize),m(c("messengerIterateEmoticons"),l,this.props.customSize)];return j.jsx(c("BaseTextWithDecoration.react"),babelHelpers["extends"]({},this.props,{text:this.props.text,decorators:a}))};return b}(j.Component);a.renderEmoji=k;g["default"]=a}),98);
__d("MessengerTextWithEntities.react",["BaseTextWithEntities.react","Link.react","MessengerTextWithEmoticons.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){return a.replace(/<3\b|&hearts;/g,"\u2665")}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){if(d.props.renderEmoticons||d.props.renderEmoji)return h.jsx(c("MessengerTextWithEmoticons.react"),{text:a,customSize:d.props.customSize,renderEmoticons:d.props.renderEmoticons,renderEmoji:d.props.renderEmoji});else return i(a)},d.$2=function(a,b){if(d.props.interpolator)return d.props.interpolator(a,b);else return h.jsx(c("Link.react"),{href:b.entity,children:a})},b)||babelHelpers.assertThisInitialized(d)}var d=b.prototype;d.render=function(){return h.jsx(c("BaseTextWithEntities.react"),babelHelpers["extends"]({},this.props,{aggregatedRanges:this.props.aggregatedRanges,imageRanges:this.props.imageRanges,metaRanges:this.props.metaRanges,rangeRenderer:this.$2,ranges:this.props.ranges,text:this.props.text,textRenderer:this.$1}))};return b}(h.Component);g["default"]=a}),98);
__d("MessengerScrollableArea.react",["cx","ReactDOM","ScrollableArea.react","Style","UserAgent","clearImmediate","gkx","joinClasses","react","setImmediate","throttle"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=20,k=c("gkx")("1094116");a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this,b)||this;e.$1=!1;e.$2=null;e.$5=function(){if(e.$1){var a;e.props.onScroll&&(a=e.props).onScroll.apply(a,arguments)}};e.$6=function(){if(!c("UserAgent").isBrowser("IE"))return;if(k)return;if(!e.refs||!e.$4.current)return;var a=e.$4.current.refs.wrap,b=e.$4.current.refs.body;if(!b||!a)return;b=d("ReactDOM").findDOMNode(b);a=d("ReactDOM").findDOMNode(a);a=a.offsetWidth-a.clientWidth;a>0&&c("Style").set(b,"margin-right",-a+"px")};e.$3=c("throttle")(e.$5,50);e.$4=i.createRef();return e}var e=b.prototype;e.componentDidMount=function(){this.$2=c("setImmediate")(this.$6),this.$1=!0};e.componentWillUnmount=function(){c("clearImmediate")(this.$2),this.$1=!1};e.render=function(){var a=this.props.needsFastScrollHandler?this.$5:this.$3;return i.jsx(c("ScrollableArea.react"),{className:c("joinClasses")("_5f0v",this.props.className),height:this.props.height,onClick:this.props.onClick,onScroll:a,persistent:!0,ref:this.$4,shadow:!1,tabIndex:this.props.tabIndex,width:this.props.width,children:this.props.children})};e.getArea=function(){if(this.$4.current)return this.$4.current.getArea()};e.scrollToBottom=function(a){var b=this.getArea();b&&this.scrollToPosition(b.getScrollHeight(),!!a)};e.scrollToTop=function(a){var b=this.getArea();b&&b.scrollToTop(!!a)};e.scrollToPosition=function(a,b,c){b===void 0&&(b=!1);c===void 0&&(c={});var d=this.getArea();if(!d)return;d.setScrollTop(a,b,c)};e.isScrolledToBottom=function(){return this.isScrolledToBottomWithHeight(0)};e.isScrolledToBottomWithHeight=function(a){var b=this.getArea();return!b?!1:b.getScrollTop()+b.getClientHeight()+a>=b.getScrollHeight()-j};e.isScrolledToTop=function(){var a=this.getArea();return!a?!0:a.getScrollTop()<=j};e.getScrollTop=function(){var a=this.getArea();return!a?0:a.getScrollTop()};return b}(i.Component);g["default"]=a}),98);
__d("WorkChatRedesignedMessageListCheck.bs",["CurrentUser","MessengerEnvironment","gkx"],(function(a,b,c,d,e,f){"use strict";a=b("gkx")("895574")&&b("CurrentUser").isWorkUser()&&b("MessengerEnvironment").messengerui;f.enabled=a}),null);
__d("MessengerDateBreak.bs",["cx","FBLogger","WorkChatRedesignedMessageListCheck.bs","formatDate","joinClasses","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){var c=a.date;a=a.className;a=a!==void 0?a:"";try{var d={today:"g:ia",thisYear:"M jS, g:ia",withinWeek:"D g:ia",older:"m/d/Y g:ia",future:"g:ia"};c=b("formatDate")(c,d);return i.jsx("h4",{className:b("joinClasses")(a,"_497p"+(b("WorkChatRedesignedMessageListCheck.bs").enabled?" _7w5v":"")+(b("WorkChatRedesignedMessageListCheck.bs").enabled?" _7w78":"")+" _2lpt"),children:i.jsx("time",{className:"_3oh-",children:c})})}catch(a){b("FBLogger")("messaging").mustfix("invalid timestamp: Js.Date.getTime(date)");return null}}c=i.memo(a,function(a,b){return a.date.getTime()===b.date.getTime()});f.make=c}),null);
__d("MessengerDateBreak.re",["MessengerDateBreak.bs"],(function(a,b,c,d,e,f){a=b("MessengerDateBreak.bs").make;f.make=a}),null);
__d("MessengerDeliveryReceipt.bs",["bs_belt_MapString","bs_belt_Option"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("bs_belt_Option").getWithDefault(b("bs_belt_MapString").get(a,c),0)}c=b("bs_belt_Option").getWithDefault;f.$pipe$question=c;f.getDeliveryTimeOfThread=a}),null);
__d("EmojiOnlyMessage.react",["cx","EmojiImageURL","EmojiLikeConstants","FBEmojiResource","Image.react","MessengerHotlikeEmoji.bs","prop-types","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.render=function(){var a="_1ift _1ifu",b=0,e=this.props.contents.map(function(e){b++;var f=e.emojiKey;if(f){f=d("MessengerHotlikeEmoji.bs").isMessengerHotlike(f)?d("EmojiImageURL").getMessengerURL(f,d("EmojiLikeConstants").sizeMap.dp32):new(c("FBEmojiResource"))(f).getImageURL(d("EmojiLikeConstants").sizeMap.dp32);return i.jsx(c("Image.react"),{alt:e.text,className:a,src:f},b)}else return i.jsx("span",{children:e.text},b)});return i.jsx("div",{tabIndex:"0",children:e})};return b}(i.Component);a.propTypes={contents:c("prop-types").arrayOf(c("prop-types").shape({emojiKey:c("prop-types").string,text:c("prop-types").string.isRequired})).isRequired};g["default"]=a}),98);
__d("LinkCTAXMATAsyncLink.react",["AsyncRequest","FDSLink.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.onClick=function(){new(c("AsyncRequest"))().setURI(d.props.uri).setMethod("POST").send()},b)||babelHelpers.assertThisInitialized(d)}var d=b.prototype;d.render=function(){return h.jsx(c("FDSLink.react"),{onClick:this.onClick,children:this.props.text})};return b}(h.Component);g["default"]=a}),98);
__d("MercuryShareAttachmentRenderLocations",[],(function(a,b,c,d,e,f){"use strict";var g="chat",h="chat_preview",i="ufi_composer",j="messenger",k="pages_inbox";function a(){return[g,h,i,j,k]}function b(a){return a===h}f.CHAT=g;f.CHAT_PREVIEW=h;f.COMPOSER=i;f.MESSENGER=j;f.PAGES_INBOX=k;f.getValues=a;f.isPreview=b}),66);
__d("MercuryMessageStore",["CurrentUser","LogHistory","MercuryAPIArgsSource","MercuryMessagingLightswitch","MercuryThreadInformer","MercuryThreadlistConstants","MessengerState.bs","SubscriptionsHandler","mixInEventEmitter","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";var h=d("LogHistory").getInstance("mercury_message_store");a=function(){function a(a,b,e,f){var g=this;this.$5=a;this.$1=e||c("CurrentUser").getID();this.$2=1;this.$7=f;this.$3=b||d("MercuryThreadlistConstants").RECENT_MESSAGES_LIMIT;this.$6=e?c("MercuryThreadInformer").getForFBID(e):c("MercuryThreadInformer").get();this.$4=new(c("SubscriptionsHandler"))();this.$4.addSubscriptions(this.$6.subscribe("messages-received",function(a,b){return g.$8(b)}),this.$6.subscribe("messages-updated",function(a,b){return b[g.$5]&&g.$9(b[g.$5])}),this.$6.subscribe("messages-deleted",function(a,b){return b[g.$5]&&g.$10(b[g.$5])}),this.$6.subscribe("messages-reordered",function(a,b){return b[g.$5]&&g.$11()}),this.$6.subscribe("thread-invalidated",function(a,b){return b[g.$5]&&g.$12()}));var i=this.$13();c("MercuryMessagingLightswitch").guard(function(){h.debug("constructed",JSON.stringify({threadID:g.$5,messageCount:i}))});i<this.$3?this.$14():c("setImmediate")(function(){g.$11()})}var b=a.prototype;b.destroy=function(){var a=this;this.$4&&this.$4.release();this.removeAllListeners();c("MercuryMessagingLightswitch").guard(function(){h.debug("destroyed",JSON.stringify({threadID:a.$5}))})};b.subscribe=function(a){return this.addRetroactiveListener("updated",a)};b.fetchMoreMessages=function(){if(this.hasFetchedAll())return!1;this.$14();return!0};b.hasFetchedAll=function(){return d("MessengerState.bs").hasLoadedAllMessages(this.$1,this.$5)||d("MessengerState.bs").isNewEmptyLocalThread(this.$1,this.$5)};b.$13=function(){return d("MessengerState.bs").getCurrentlyLoadedMessages(this.$1,this.$5).length};b.$14=function(){var a=this,b=this.$3,e=c("MercuryAPIArgsSource").MERCURY;this.$7!=null&&(e=this.$7);d("MessengerState.bs").getThreadMessagesRange(this.$1,this.$5,this.$13(),b,this.$15.bind(this),null,e);this.$2<10&&(this.$2+=1);d("MessengerState.bs").hasLoadedNMessages(this.$1,this.$5,b+this.$13())&&c("setImmediate")(function(){a.$11()})};b.$15=function(b){var d=this;c("MercuryMessagingLightswitch").guard(function(){h.debug("fetch_messages",JSON.stringify({threadID:d.$5,fetchedMessagesCount:b&&b.length||0,messageCount:d.$13()}))});b&&!b.length&&!this.$13()&&this.$16(a.THREAD_IS_EMPTY)};b.$8=function(b){var c=[];b=b[this.$5];b&&b.length&&(c=c.concat(b.filter(function(a){return!!a})));c.length&&this.$16(a.MESSAGES_RECEIVED)};b.$9=function(b){this.$16(a.MESSAGES_CHANGED)};b.$10=function(b){this.$16(a.MESSAGES_DELETED,b)};b.$11=function(){this.$16(a.MESSAGES_REORDERED)};b.$12=function(){this.$2=1,this.$14()};b.$16=function(a,b){var c=d("MessengerState.bs").getCurrentlyLoadedMessages(this.$1,this.$5);this.releaseHeldEventType("updated");this.emitAndHold("updated",{messages:c,deletedMessages:b,eventType:a})};return a}();Object.assign(a,{MESSAGES_FETCHED:"fetched",MESSAGES_CHANGED:"changed",MESSAGES_RECEIVED:"received",MESSAGES_REORDERED:"reordered",MESSAGES_DELETED:"deleted",THREAD_IS_EMPTY:"thread-is-empty"});c("mixInEventEmitter")(a,{updated:!0});g["default"]=a}),98);
__d("PagesMessagingPerfTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:PagesMessagingPerfLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:PagesMessagingPerfLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:PagesMessagingPerfLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEventName=function(a){this.$1.event_name=a;return this};c.setExceptionCode=function(a){this.$1.exception_code=a;return this};c.setExceptionMessage=function(a){this.$1.exception_message=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPerfTime=function(a){this.$1.perf_time=a;return this};c.setPlatform=function(a){this.$1.platform=a;return this};c.setStack=function(a){this.$1.stack=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setThreadOffset=function(a){this.$1.thread_offset=a;return this};return a}();c={event_name:!0,exception_code:!0,exception_message:!0,page_id:!0,perf_time:!0,platform:!0,stack:!0,thread_id:!0,thread_offset:!0};f["default"]=a}),66);
__d("PagesManagerInboxLogger",["PagesManagerInboxTypedLogger","PagesMessagingInboxActionsTypedLogger","PagesMessagingPerfTypedLogger","keyMirror"],(function(a,b,c,d,e,f,g){"use strict";var h=c("keyMirror")({ERROR_GRAPH_QL:null,ERROR_JS:null,INITIAL_DATA_LOADED:null,INITIAL_LIST_RENDERED:null,INITIAL_LOAD:null,ITEM_DETAILS_LOADED:null,ITEM_LOADED:null,START_LOADING_ITEM_DETAILS:null,START_LOADING_ITEM:null,BROADCAST_MESSAGE_FORMAT:null,ITEM_STATUS_CHANGED:null,ITEM_STATUS_CHANGED_THREAD:null,ITEM_STATUS_CHANGED_HEADER:null,FOLDER_CHANGE_CLICKED:null,PLATFORM_CHANGE_TAB_CLICKED:null,SEND_COMMENT:null,SEND_MESSAGE:null,SEARCH_CLICKED:null,CONTENT_SEARCH_CLICKED:null,CREATE_BROADCAST_BUTTON_RENDERED:null,CREATE_BROADCAST_BUTTON_CLICKED:null,SEND_BROADCAST_BUTTON_CLICKED:null,SEND_BROADCAST_CONFIRM_BUTTON_CLICKED:null,BROADCAST_HISTORY_ROW_CLICK:null,AUTOMATED_RESPONSES_ENTRYPOINT_RENDERED:null,AUTOMATION_ENABLED:null,AUTOMATION_DISABLED:null,AUTOMATED_RESPONSES_SAVE_CLICK:null}),i,j,k=!0,l;function a(a){i=a,j=Date.now(),m(h.INITIAL_LOAD).setScreenHeight(screen.height).setScreenWidth(screen.width).log()}function b(a,b){if(!k)return;k=!1;m(h.INITIAL_LIST_RENDERED).setTimeSinceLoad(Date.now()-j).setPlatform(a).log()}function m(a){return new(c("PagesManagerInboxTypedLogger"))().setEventName(a).setPageID(i).setHref(window.location.href)}function d(a,b){m(h.ERROR_JS).setMessage(a.message).setStackTrace(a.stack).setModuleName(b).log()}function e(a){m(h.ERROR_GRAPH_QL).setMessage(a.message).setStackTrace(a.stack).log()}function f(a,b){if(l&&l.commItemID===a)return;l={commItemID:a,isCached:!0,startTimestamp:Date.now()};m(h.START_LOADING_ITEM).setPageCommItemID(a).setFolder(b).log()}function n(a){if(!l||l.commItemID!==a)return;m(h.INITIAL_DATA_LOADED).setPageCommItemID(a).setLoadTime(Date.now()-l.startTimestamp).log()}function o(a,b){if(!l||l.commItemID!==a)return;l.platform=b;l.isCached=!1;m(h.START_LOADING_ITEM_DETAILS).setPageCommItemID(a).setPlatform(b).setLoadTime(Date.now()-l.startTimestamp).log()}function p(a,b){if(!l||l.commItemID!==a)return;m(h.ITEM_DETAILS_LOADED).setPageCommItemID(a).setPlatform(b).setLoadTime(Date.now()-l.startTimestamp).log()}function q(a,b){if(l&&l.commItemID===a)return;l={commItemID:a,isCached:!0,startTimestamp:Date.now()};m(h.START_LOADING_ITEM).setThreadToken(a).setPlatform(b).log();new(c("PagesMessagingPerfTypedLogger"))().setPageID(i).setThreadID(a).setPlatform(b).setEventName("messages_messagelist_load_start").log()}function r(a,b){if(!l||l.commItemID!==a)return;var d=Date.now()-l.startTimestamp;m(h.ITEM_DETAILS_LOADED).setThreadToken(a).setPlatform(b).setLoadTime(d).log();new(c("PagesMessagingPerfTypedLogger"))().setPageID(i).setThreadID(a).setPlatform(b).setEventName("messages_messagelist_load_end").setPerfTime(d).log();l=null}function s(a){if(!l||l.commItemID!==a)return;m(h.ITEM_LOADED).setIsCached(l.isCached).setPageCommItemID(a).setLoadTime(Date.now()-l.startTimestamp).setPlatform(l.platform).log();l=null}function t(a){m(h.BROADCAST_MESSAGE_FORMAT).setBroadcastMessageFormat(a).log()}function u(a,b,c,d){d=d||null;m(h.ITEM_STATUS_CHANGED).setPageCommItemID(a).setPageCommItemStatus(c).setPlatform(b).setPageCommSearchType(d).log()}function v(a,b,c,d,e){e=e||null;m(h.ITEM_STATUS_CHANGED_THREAD).setFolder(d).setPageCommItemID(a).setPageCommItemStatus(c).setPlatform(b).setPageCommSearchType(e).log()}function w(a,b,c,d){m(h.ITEM_STATUS_CHANGED_HEADER).setFolder(d).setPageCommItemID(a).setPageCommItemStatus(c).setPlatform(b).log()}function x(a,b){m(h.FOLDER_CHANGE_CLICKED).setFolder(b).setPlatform(a).log()}function y(a,b){m(h.PLATFORM_CHANGE_TAB_CLICKED).setPlatform(a).setViewMode(b).log()}function z(a,b,d,e){d===void 0&&(d=null),e===void 0&&(e=null),new(c("PagesMessagingInboxActionsTypedLogger"))().setInboxAction("send_comment").setPlatform(a).addToExtraData("page_id",b).addToExtraData("comment_fbid",d).addToExtraData("post_fbid",e).log(),m(h.SEND_COMMENT).setPlatform(a).log()}function A(a,b){new(c("PagesMessagingInboxActionsTypedLogger"))().setPlatform(a).setInboxAction("mark_as_unread").addToExtraData("page_id",b).log()}function B(a,b,d,e,f){new(c("PagesMessagingInboxActionsTypedLogger"))().setInboxAction("reaction").setPlatform(a).addToExtraData("page_id",b).addToExtraData("comment_fbid",d).addToExtraData("post_fbid",e).addToExtraData("reaction_type",f).log()}function C(a,b,d,e){new(c("PagesMessagingInboxActionsTypedLogger"))().setInboxAction("send_message").setPlatform(a).addToExtraData("page_id",b).addToExtraData("enter_to_send_enabled",d.toString()).log(),m(h.SEND_MESSAGE).setPlatform(a).setFolder(e).log()}function D(a,b){new(c("PagesMessagingInboxActionsTypedLogger"))().setInboxAction("receive_message").setPlatform(a).addToExtraData("page_id",b).log()}function E(a,b){m(h.SEARCH_CLICKED).setPageCommSearch(a).setPlatform(b).log()}function F(a,b){m(h.CONTENT_SEARCH_CLICKED).setPageCommSearchType(a).setPageCommSearch(b).log()}function G(){m(h.CREATE_BROADCAST_BUTTON_RENDERED).log()}function H(){m(h.CREATE_BROADCAST_BUTTON_CLICKED).log()}function I(a){m(h.SEND_BROADCAST_BUTTON_CLICKED).setBroadcastAudience(a).log()}function J(){m(h.SEND_BROADCAST_CONFIRM_BUTTON_CLICKED).log()}function K(){m(h.BROADCAST_HISTORY_ROW_CLICK).log()}function L(){m(h.AUTOMATED_RESPONSES_ENTRYPOINT_RENDERED).log()}function M(a){m(h.AUTOMATION_ENABLED).setAutomatedResponseTriggerType(a).log()}function N(a){m(h.AUTOMATION_DISABLED).setAutomatedResponseTriggerType(a).log()}function O(a,b){m(h.AUTOMATED_RESPONSES_SAVE_CLICK).setAutomatedResponseTriggerType(a).setHadError(b).log()}g.init=a;g.logInitialListRendered=b;g.create=m;g.logErrorJS=d;g.logErrorGraphQL=e;g.startLoadingItem=f;g.itemInitialDataLoaded=n;g.startLoadingItemDetails=o;g.itemDetailsLoaded=p;g.startLoadingThread=q;g.threadDetailsLoaded=r;g.itemRendered=s;g.logBroadcastMessageFormat=t;g.itemStatusChanged=u;g.itemStatusChangedInThread=v;g.itemStatusChangedInHeader=w;g.logFolderChangeClick=x;g.logPlatformChangedClicked=y;g.logSendComment=z;g.logMarkAsUnread=A;g.logCommentReaction=B;g.logSendMessage=C;g.logReceiveMessage=D;g.logSearchClick=E;g.logContentSearchClicked=F;g.logBroadcastButtonRendered=G;g.logBroadcastButtonClicked=H;g.logBroadcastSendButtonClicked=I;g.logBroadcastConfirmationButtonClicked=J;g.logBroadcastHistoryRowClicked=K;g.logAutomatedResponsesRendered=L;g.logAutomatedResponsesEnabled=M;g.logAutomatedResponsesDisabled=N;g.logAutomatedResponsesSaveClicked=O}),98);
__d("MercurySyncNewMessageTransformer",["Bootloader","FBIDCheck","IrisProtocolMessageLifetime","MercuryIDs","MercuryMessageCustomizations","MercuryProfileRanges","MessageThreadReadState","MessageThreadReadStateEffect","MessageUnsendabilityStatus.bs","MessengerRealtimeAttachmentTransformer.bs","PageCommItemStatus","PagesManagerInboxLogger"],(function(a,b,c,d,e,f){"use strict";var g=b("MessageThreadReadStateEffect").extractThreadStateEffectFromDelta,h=function(a){var b={};try{b=JSON.parse(a)}catch(a){}return b};function a(a,c){var d=parseInt(c.messageMetadata.timestamp,10),e=c.messageMetadata.skipBumpThread,f=g(a,c),i=f===b("MessageThreadReadState").MARK_UNREAD&&a!==c.messageMetadata.actorFbId.toString(),j=c.messageMetadata.messageId,k=[];c.attachments&&(k=c.attachments.map(function(c){var d;c.mercury?d=c.mercury:d=h(c.mercuryJSON);if(!d)return null;c=d.extensible_attachment;var e=d.blob_attachment;d=d.sticker_attachment;if(!c&&!e&&!d)return null;var f=b("FBIDCheck").isUser_deprecated(a);c?c=b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:c},j,f):e?c=b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{blob_attachments:[e]},j,f):c=b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{sticker:d},j,f);return c.length>0?c[0]:null}));var l=!b("FBIDCheck").isUser_deprecated(a);l&&c.messageMetadata.actorFbId!=a&&b("Bootloader").loadModules(["PagesCommsInboxFunnel","PagesCommsInboxLoggerEvent","PagesCommsInboxLoggerPlatform"],function(c,d,e){b("PagesManagerInboxLogger").logReceiveMessage("MESSENGER",a)},"MercurySyncNewMessageTransformer");k=k.filter(Boolean);var m=c.messageMetadata.tags?c.messageMetadata.tags[0]:void 0,n=null;if(c.data&&c.data.adminSignatureCreatorID){var o=c.data;n={creatorID:o.adminSignatureCreatorID||null,creatorName:o.adminSignatureCreatorName||null,creatorType:o.adminSignatureCreatorType||null,labelType:o.adminSignatureLabelType||null,pageID:o.adminSignaturePageID||null,profileURI:o.adminSignatureProfileURI||null}}return{message_id:j,threading_id:null,offline_threading_id:c.messageMetadata.offlineThreadingId,author:b("MercuryIDs").getParticipantIDFromUserID(c.messageMetadata.actorFbId),author_email:c.messageMetadata.actorFbId+"@facebook.com",ephemeral_ttl_mode:c.ttl?b("IrisProtocolMessageLifetime")[c.ttl]:0,timestamp:d,is_unread:i,is_filtered_content:!1,is_filtered_content_bh:!1,is_filtered_content_account:!1,is_filtered_content_quasar:!1,is_filtered_content_invalid_app:!1,source:m,tags:c.messageMetadata.tags,is_spoof_warning:!1,folder:null,thread_fbid:c.messageMetadata.threadKey.threadFbId,other_user_fbid:c.messageMetadata.threadKey.otherUserFbId,body:c.body!==void 0?c.body:"",html_body:null,subject:null,has_attachment:k.length>0,attachments:k,ranges:void 0,thread_id:null,action_type:"ma-type:user-generated-message",is_from_iris:!0,is_sponsored:!!(c.data&&c.data.is_sponsored&&c.data.is_sponsored==="true")||!!(c.untypedData&&c.untypedData.is_sponsored&&c.untypedData.is_sponsored==="true"),commerce_message_type:c.data?c.data.commerce_message_type:null,customizations:c.data&&c.data.customization?b("MercuryMessageCustomizations").parseCustomizations(c.data.customization):null,platform_xmd:c.data&&c.data.platform_xmd?c.data.platform_xmd:null,profile_ranges:b("MercuryProfileRanges").extractFromDelta(c),message_source:c.data&&c.data.message_source_data?h(c.data.message_source_data).message_source:null,skip_bump_thread:e,thread_read_state_effect:f,montage_reply_data:c.data&&c.data.montage_reply_data?h(c.data.montage_reply_data):null,meta_ranges:c.data&&c.data.meta_ranges?h(c.data.meta_ranges):null,creator_info:n,comm_status:l?b("PageCommItemStatus").TODO:null,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(c.messageMetadata.unsendType)}}e.exports={transform:a}}),null);
__d("MercuryAttachmentLayoutTypeHelper",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b;return(a==null?void 0:(b=a.xma_layout_info)==null?void 0:b.layout_type)==="ADMIN"||(a==null?void 0:(b=a.share)==null?void 0:(a=b.xma_layout_info)==null?void 0:a.layout_type)==="ADMIN"}f.isAdminType=a}),66);
__d("MessengerLightweightActionUtils",[],(function(a,b,c,d,e,f){"use strict";function g(a){return!!(a&&a.attach_type==="share"&&a.share&&a.share.target&&a.share.target.lwa_type)}function a(a){a=a==null?void 0:a.attachments;return!!(a&&a.length===1&&g(a[0]))}function b(a){return a.attachments[0].share.title}function c(a){return a[0].share.title}f.isLWAAttachment=g;f.isLWAMessage=a;f.getCollapsedLWAText=b;f.getLWASnippetText=c}),66);
__d("MercuryMessageGroup",["MercuryAttachmentLayoutTypeHelper","MercuryShareAttachmentRenderLocations","MercuryThreadlistConstants","MessengerLightweightActionUtils","MessengerMessage.bs","enumerate"],(function(a,b,c,d,e,f){"use strict";var g={calculateMessageGroups:function(a,c){var d=[],e=null,f={value:null};a=b("enumerate")(a);var h;while(!(h=a.next()).done){var i=g.canAppendMessageToLastGroup(f.value,h.value,c);i||(e=[],d.push(e));e.push(h.value);f=h}return d},canAppendMessageToLastGroup:function(a,c,d){var e=b("MercuryThreadlistConstants").GROUPING_THRESHOLD;if(!a||h(a,d)||h(c,d)||a.author!=c.author||a.timestamp<c.timestamp-e||a.is_spoof_warning!==c.is_spoof_warning||a.page_admin_notes||c.replied_to_message||c.is_forwarded)return!1;d=b("MessengerMessage.bs").getPersona(a);e=b("MessengerMessage.bs").getPersona(c);return!d&&!e?!0:d===null||e===null?!1:d.id===e.id}};function h(a,c){var d=a.has_attachment;d&&(c===b("MercuryShareAttachmentRenderLocations").MESSENGER||c===b("MercuryShareAttachmentRenderLocations").CHAT)&&(d=i(a));return!!(b("MessengerLightweightActionUtils").isLWAMessage(a)||a.action_type=="ma-type:log-message"||d||a.html_body||a.body&&a.body.length>b("MercuryThreadlistConstants").MAX_CHARS_BEFORE_BREAK)}function i(a){a=a.attachments[0];return!a||a.attach_type==="sticker"||a.attach_type==="animated_image"||b("MercuryAttachmentLayoutTypeHelper").isAdminType(a)}e.exports=g}),null);
__d("MessengerUserProfileLocationUtils",["invariant","MessengerUserProfileLocationUtilsQuery.graphql","RelayFBEnvironment","RelayHooks"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function j(){return d("RelayHooks").fetchQuery(c("RelayFBEnvironment"),i!==void 0?i:i=b("MessengerUserProfileLocationUtilsQuery.graphql"),{}).toPromise()}function a(){return j().then(function(a){var b=null,c=null;a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.user)==null?void 0:a.address;a!==null&&(b=(a==null?void 0:a.region)===""?null:a==null?void 0:a.region,c=(a==null?void 0:a.postal_code)===""?null:a==null?void 0:a.postal_code);if(b!==null&&c!==null)return{region:b,postal_code:c};else h(0,54437)})}g.FetchMessengerUserRegionAndPostalCode=a}),98);
__d("LiveChatPluginTypingIndicator.react",["cx","Image.react","MercuryTypingAnimation_DEPRECATED.react","MessagingPluginContext","PrivacyTransparentOverlay.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return this.props.pageIsTyping?i.jsxs("div",{className:"_4xkn clearfix",children:[i.jsx("div",{className:"profilePictureColumn",children:i.jsx(c("PrivacyTransparentOverlay.react"),{children:i.jsx(c("Image.react"),{className:"profilePicture",src:this.context.state.pageProfilePictureUri})})}),i.jsx("div",{className:"messages",children:i.jsx("div",{className:"_4xko _13y8",children:i.jsx(c("MercuryTypingAnimation_DEPRECATED.react"),{})})})]}):null};return b}(i.Component);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("ChatPluginMessengerErrorMessageIconSVG.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){return h.jsx("div",{children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:h.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16ZM6.79164 3.74931C6.76887 3.06617 7.31648 2.5 8 2.5C8.68352 2.5 9.23113 3.06617 9.20836 3.74931L9.03222 9.03331C9.01426 9.57233 8.57209 10 8.03278 10H7.96722C7.42791 10 6.98574 9.57233 6.96778 9.03331L6.79164 3.74931ZM9.25 12.25C9.25 12.9404 8.69036 13.5 8 13.5C7.30964 13.5 6.75 12.9404 6.75 12.25C6.75 11.5596 7.30964 11 8 11C8.69036 11 9.25 11.5596 9.25 12.25Z",fill:"#FF3A33"})})})};return b}(h.Component);g["default"]=a}),98);
__d("LiveChatPluginFileAttachment.react",["cx","Link.react","MPNFileAttachmentIconSVG.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return i.jsxs("div",{className:"_6d5w","data-testid":void 0,children:[i.jsx("div",{className:"_6d5y",children:i.jsx(c("MPNFileAttachmentIconSVG.react"),{})}),i.jsx(c("Link.react"),{className:"_6d5x",target:"_blank",href:this.props.attachment.url,children:this.props.attachment.name})]})};return b}(i.PureComponent);g["default"]=a}),98);
__d("LiveChatPluginLinkShareAttachment.react",["cx","CssBackgroundImage.react","LineClamp.react","Link.react","MessagingPluginContext","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return i.jsxs(c("Link.react"),{className:"_6bxn",href:this.props.uri,target:"_blank",children:[this.$1(),i.jsxs("div",{className:"_a178",children:[this.$2(),this.$3(),this.$4()]})]})};d.$1=function(){return this.props.image!=null?i.jsx(c("CssBackgroundImage.react"),{backgroundPosition:"center center",className:"_6j0r",height:"150px",imageURI:this.props.image,width:"100%"}):null};d.$2=function(){return this.props.title!=null?i.jsx("div",{className:"_6bxo",children:i.jsx(c("LineClamp.react"),{lines:2,children:this.props.title})}):null};d.$3=function(){return this.props.description!=null?i.jsx("div",{className:"_6bxp",children:i.jsx(c("LineClamp.react"),{lines:2,children:this.props.description})}):null};d.$4=function(){return this.props.source!=null?i.jsx("div",{className:"_6bxq",children:this.props.source}):null};return b}(i.Component);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("MPNE2ETestUtils",[],(function(a,b,c,d,e,f){"use strict";a="video-player";b="verified-badge";f.VIDEO_PLAYER_TEST_ID=a;f.VERIFIED_BADGE_TEST_ID=b}),66);
__d("MPNFallbackAttachment.react",["cx","fbt","CssBackgroundImage.react","Link.react","LiveChatPluginLoggerUtil","MPNIdentity","MessagingPluginContext","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.$4=function(){var a=c.context.state.pageID,b=d("MPNIdentity").MPNIdentity.currentUserID(),e=d("MPNIdentity").MPNIdentity.currentUserState();d("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",b,a,e===d("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab",{action_type:"customer_chat_attachment_fallback_clicked",xma_type:c.props.style})},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidMount=function(){var a=this.context.state.pageID,b=d("MPNIdentity").MPNIdentity.currentUserID(),c=d("MPNIdentity").MPNIdentity.currentUserState();d("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",b,a,c===d("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab",{action_type:"customer_chat_attachment_fallback_impression",xma_type:this.props.style})};e.render=function(){var a=this.context.state.accessToken;if(a)return j.jsxs("div",{className:"_6bxn",children:[this.$1(),j.jsx("div",{className:"_a178",children:this.$2()})]});else return j.jsxs("div",{className:"_6bxn",children:[this.$1(),j.jsxs("div",{className:"_a178",children:[this.$2(),this.$3()]})]})};e.$1=function(){return this.props.image!=null?j.jsx(c("CssBackgroundImage.react"),{backgroundPosition:"center center",className:"_6j0r",height:"150px",imageURI:this.props.image,width:"100%"}):null};e.$2=function(){return this.props.title!=null?j.jsx("div",{className:"_6bxo",children:this.props.title}):null};e.$3=function(){return j.jsx("div",{className:"_6bxp",children:i._(/*FBT_CALL*/"{=m0} in Messenger"/*FBT_CALL*/,[i._implicitParam("=m0",j.jsx(c("Link.react"),{onClick:this.$4,href:"https://m.me/"+this.context.state.pageID,target:"_blank",children:i._(/*FBT_CALL*/"See the full message"/*FBT_CALL*/)}))])})};return b}(j.PureComponent);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("ChatPluginTemplateConverter",["URI","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){a=b?(b=a)!=null?b.target:b:(b=a)!=null?(b=b.share)!=null?(b=b.target)!=null?(b=b.items)!=null?b[0]:b:b:b:b;return!a||!a.name?null:{title:a.name,subtitle:(b=a)!=null?(b=b.metalines)!=null?b.metaline_1:b:b,default_action:(b=a)!=null?(b=b.default_action)!=null?b.action_link:b:b,image_url:a.thumb_url?a.thumb_url:(b=a)!=null?(b=b.media_blob_attachments)!=null?(b=b[0])!=null?(b=b.image)!=null?b.uri:b:b:b:b,image_aspect_ratio:a.image_aspect_ratio,ctas:a.call_to_actions}}function i(a){var b;if(!a)return null;b=(b=a)!=null?b.messenger_generic_xma_template_extra_info:b;var c=[];for(var d=1;d<4;d++){var e,f="cta"+d;if(!b||!((e=b)!=null?e[f]:e))break;c.push(b[f])}return{title:a.title,subtitle:a.description,default_action:b==null?void 0:(e=b.default_cta)==null?void 0:e.action_url,image_url:(f=a.media)==null?void 0:f.image,image_aspect_ratio:null,ctas:c}}function a(a){a=(a=a)!=null?(a=a.share)!=null?a.subattachments:a:a;return!a||a.length===0?[]:a.map(function(a){var b;b=(b=a)!=null?(b=b.style_list)!=null?b[0]:b:b;return b=="messenger_generic_template"?i(a):h(a,!0)}).filter(function(a){return a})}function b(a){var b,d;d=(d=a)!=null?(d=d.share)!=null?(d=d.target)!=null?(d=d.items)!=null?d[0]:d:d:d:d;if(!d)return null;b=(b=d)!=null?(b=b.media_blob_attachments)!=null?(b=b[0])!=null?b.large_preview:b:b:b;if(b)return{image_url:b.uri,height:b.height,width:b.width,playable:!1,ctas:d.call_to_actions};b=(b=d)!=null?(b=b.media_blob_attachments)!=null?(b=b[0])!=null?b.playable_url:b:b:b;if(!b)return null;d=c("nullthrows")((d=d)!=null?(d=d.media_blob_attachments)!=null?d[0]:d:d);var e,f,g=null;d.__typename==="MessageVideo"?(e=d.original_dimensions.x,f=d.original_dimensions.y):(e=d.width,f=d.height,g=!0);return{image_url:null,height:f,width:e,playable:!0,playable_url:b,source_id:d.legacy_attachment_id?d.legacy_attachment_id:d.id,is_share:(f=g)!=null?f:!1,page_id:(e=a.metadata)==null?void 0:e.pageid,ctas:[]}}function d(a){var b;if(!((b=a.share)==null?void 0:b.media))return null;b=c("nullthrows")(a.share.media);a=(a=a)!=null?(a=a.share)!=null?a.messenger_generic_xma_template_extra_info:a:a;var d=[];for(var e=1;e<4;e++){var f,g="cta"+e;if(!a||!((f=a)!=null?f[g]:f))break;d.push(a[g])}if(b.playable&&b.source){f=new(c("URI"))(b.source).getQueryData();return{image_url:null,height:(g=b.image_size)==null?void 0:g.height,width:(a=b.image_size)==null?void 0:a.width,playable:b.playable,playable_url:b.source,source_id:f.entity_id,is_share:!1,ctas:d}}if(b.image){return{image_url:b.image,height:(e=b.image_size)==null?void 0:e.height,width:(g=b.image_size)==null?void 0:g.width,playable:!1,ctas:d}}return null}g.convertLegacySchemaToGenericTemplate=h;g.convertLightspeedSchemaToGenericTemplate=i;g.convertSchemaToHScroll=a;g.convertLegacySchemaToMediaTemplate=b;g.convertLightspeedSchemaToMediaTemplate=d}),98);
__d("MPNCallToAction.react",["cx","fbt","BootloaderResource","JSResource","Link.react","LiveChatPluginLoggerUtil","MNCommerceCTAProcessor","MPNConstants","MPNIdentity","MercuryIDs","MessagingPluginContext","PopupWindow","Tooltip.react","gkx","joinClasses","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k="https://www.facebook.com/plugins/chat/transcript";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var e;e=a.call(this,b,c)||this;e.$6=function(){e.$12("customer_chat_open_url_cta_clicked")};e.$1=d("MercuryIDs").getThreadIDFromUserID(e.context.state.pageID);e.$2=d("LiveChatPluginLoggerUtil").getAttributionTags();e.$3=d("MPNIdentity").MPNIdentity.currentUserState()===d("MPNIdentity").MPNIdentityState.FB;return e}var e=b.prototype;e.render=function(){var a,b=this,e=this.props,f=e.callToAction,g=e.messageID;e=(e=(e=f.action_type)!=null?e:f.action_open_type)!=null?e:f.type;a=(a=f.action_title)!=null?a:f.title;if(e==null||a==null)return null;var h=null;switch(e){case 2:case"xma_web_url":var i=(e=f.action_link)!=null?e:f.action_url;e=i!=null?i.includes(k):!1;e?h=this.$4(a,function(){b.$5(i)}):h=this.$4(a,this.$6,i);break;case 31:h=this.$4(a,function(){b.$5(f.action_link)});break;case 4:case"xma_postback":h=this.$4(a,function(){b.$7(f)});break;case 1:e=(e=f)!=null?(e=e.webview_metadata)!=null?e.messenger_extensions:e:e;if(e!=null){e=(e=f)!=null?(e=e.webview_metadata)!=null?e.fallback_url:e:e;h=this.$4(a,this.$6,e!=null?e:f.action_link)}else h=this.$8(a);break;case 5:case"xma_account_link":h=this.$4(a,function(){b.$9(f,g)});break;case 29:d("BootloaderResource").preload(c("JSResource")("ChatPluginCufeeModal.react").__setRef("MPNCallToAction.react"));h=c("gkx")("2784")?this.$10(a,function(){b.context.dispatchAction({type:"SHOW_CUFEE_MODAL",showCufeeModal:d("MPNConstants").MPNVisibility.NOT_HIDDEN}),b.$11()}):this.$8(a);break;default:h=this.$8(a)}return j.jsx("div",{style:{width:(e=this.props.width)!=null?e:null},className:c("joinClasses")("_991a _a17l",this.props.className),children:h})};e.$4=function(a,b,d){return j.jsx(c("Link.react"),{className:"_a17m","data-testid":void 0,href:d,onClick:b,target:"_blank",children:a})};e.$10=function(a,b){return j.jsx(c("Link.react"),{className:"_a17m",style:{color:this.context.state.threadCSSColor},onClick:b,children:a})};e.$8=function(a){return j.jsx("div",{className:"_a17m _6ir6",children:j.jsx(c("Tooltip.react"),{tooltip:i._(/*FBT_CALL*/"To use this feature, use the Messenger app."/*FBT_CALL*/),children:a})})};e.$9=function(a,b){var d;c("MNCommerceCTAProcessor").process((d=(d=a.id)!=null?d:a.target_id)!=null?d:"",b);this.$12("customer_chat_account_link_cta_clicked")};e.$5=function(a){d("PopupWindow").open(a,420,450),this.$12("customer_chat_open_dialog_cta_clicked")};e.$7=function(a){var b=d("MPNIdentity").MPNIdentity.currentUserState(),c=this.context.state.refererUri;if(b!==d("MPNIdentity").MPNIdentityState.GUEST&&b!==d("MPNIdentity").MPNIdentityState.FB)return;else{var e;b=this.context.state.messageStore;b=b.sendQueue;if(!b)return;b.enqueueAndSend((e=(e=a.action_title)!=null?e:a.title)!=null?e:"",this.$3,c,b.makePlatformTokenForPostbackCTA((c=(e=a.id)!=null?e:a.target_id)!=null?c:""))}this.$12("customer_chat_postback_clicked")};e.$12=function(a){var b=this.context.state.pageID;d("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",d("MPNIdentity").MPNIdentity.currentUserID(),b,d("MPNIdentity").MPNIdentity.currentUserState()===d("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab",{action_type:a})};e.$11=function(){var a=this.props.callToAction.cta_data;a={first_screen:a==null?void 0:a.feedback_form_first_screen.feedback_questions[0],privacy_policy:a==null?void 0:a.feedback_form_privacy_policy,form_state:a==null?void 0:a.feedback_form_state,form_id:a==null?void 0:a.feedback_form_id};this.props.setFeedback==null?void 0:this.props.setFeedback(a)};return b}(j.PureComponent);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("MPNButtonTemplate.react",["cx","MPNCallToAction.react","MessagingPluginContext","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a;a=(a=this.props.attachment)!=null?(a=a.share)!=null?(a=a.target)!=null?a.call_to_actions:a:a:a;var b=this.props.messageID;if(!a||a.length===0)return null;a=a.map(function(a,d){return i.jsx(c("MPNCallToAction.react"),{callToAction:a,className:d===0?"_6isd":"",messageID:b},a.id)});return i.jsx("div",{className:"_6b7s _a17n",children:a})};return b}(i.PureComponent);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("MPNGenericTemplate.react",["cx","CssBackgroundImage.react","LineClamp.react","Link.react","MPNCallToAction.react","MessagingPluginContext","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return!this.props.template?null:i.jsxs("div",{className:"_6j2i",children:[this.$1(),i.jsxs("div",{className:"_a17j",children:[this.$2(),this.$3()]})]})};d.$4=function(a){var b;b=(b=this.props.template)==null?void 0:b.default_action;return b&&a?i.jsx(c("Link.react"),{href:b,target:"_blank",className:"_9v_v _9v_w",children:a}):a};d.$1=function(){var a,b;a=(a=this.props.template)==null?void 0:a.image_url;b=this.props.imageAspectRatio?this.props.imageAspectRatio:(b=this.props.template)==null?void 0:b.image_aspect_ratio;var d=this.context.state.windowSize==="compact";b=b===1?260:150;d&&(b*=.77333);d=a||this.props.hasImage?i.jsx(c("CssBackgroundImage.react"),{backgroundPosition:"center center",className:"_6j0s",height:b+"px",imageURI:a,width:"100%"}):null;return this.$4(d)};d.$2=function(){var a=i.jsxs("div",{className:"_a178",children:[this.$5(),this.$6()]});return this.$4(a)};d.$5=function(){var a;a=(a=this.props.template)==null?void 0:a.title;return a?i.jsx(c("LineClamp.react"),{className:"_6j0t _a17a",lines:3,children:a}):null};d.$6=function(){var a;a=(a=this.props.template)==null?void 0:a.subtitle;return a?i.jsx("div",{className:"_a17k",children:a}):null};d.$3=function(){var a,b=this;a=(a=this.props.template)==null?void 0:a.ctas;var d=this.props.messageID;if(!a||a.length===0)return null;var e=a.map(function(a,e){return i.jsx(c("MPNCallToAction.react"),{callToAction:a,messageID:d,setFeedback:b.props.setFeedback},e)});if(this.props.maxNumCTAs&&this.props.maxNumCTAs>a.length){var f=[];for(var g=0;g<this.props.maxNumCTAs-a.length;g++)f.push(i.jsx("div",{className:"_6j0z _a17l _a17m",children:"\xa0"},g));e=f.concat(e)}return e};return b}(i.PureComponent);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("MPNHScrollTemplate.react",["cx","AdsArrowedCarouselEnhanced.react","MPNGenericTemplate.react","MessagingPluginContext","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return i.jsx(c("AdsArrowedCarouselEnhanced.react"),{isLeftArrowOverlappingContent:!1,children:this.$1()})};d.$1=function(){var a=this.props.messageID,b=!1,d=0,e=1.91;this.props.templates.forEach(function(a){a.ctas&&a.ctas.length>d&&(d=a.ctas.length),a.image_url!=null&&a.image_url.length>0&&(b=!0),a.image_aspect_ratio===1&&(e=1)});return this.props.templates.map(function(f,g){return i.jsx("div",{className:"_a17o",children:i.jsx(c("MPNGenericTemplate.react"),{template:f,messageID:a,hasImage:b,imageAspectRatio:e,maxNumCTAs:d})},g)})};return b}(i.Component);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("MPNMediaTemplate.react",["cx","Image.react","MPNCallToAction.react","MWChatVideoPlayer.react","MessengerSpinner.react","VideoAutoplayManagerX.react","nullthrows","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=360,k=290,l=100;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){if(!this.props.template)return null;var a=c("nullthrows")(this.props.template);return i.jsxs("div",{className:"_3cn0",children:[this.$1(a),this.$2(a)]})};d.$1=function(a){if(a.playable){if(!a.playable_url)return null;var b=this.$3(a);return this.$4(a,b)}if(!a.image_url)return null;b=this.$5({height:a.height,width:a.width});return i.jsx(c("Image.react"),{className:"_2k7y",height:b.y,width:b.x,src:a.image_url})};d.$3=function(a){return{legacy_attachment_id:a.source_id,original_dimensions:this.$5({height:a.height,width:a.width}),start_muted:!0,no_fullscreen:!0,hide_controls_on_finish:!0,url:a.playable_url,is_share:a.is_share}};d.$4=function(a,b){if(b===null||b===void 0)return null;a=i.jsx(c("VideoAutoplayManagerX.react"),{children:i.jsx(c("MWChatVideoPlayer.react"),{controls:"mwchat",fbid:b.fbid,originalHeight:b.original_dimensions.y,originalWidth:b.original_dimensions.x,sdSrc:b.url})});return i.jsx(i.Suspense,{fallback:i.jsx("div",{style:{width:b.original_dimensions.x,height:b.original_dimensions.y},children:i.jsx("div",{className:"spinner",children:i.jsx(c("MessengerSpinner.react"),{color:"blue",size:c("MessengerSpinner.react").medium_size})})}),children:a})};d.$5=function(a){var b=a.width;a=a.height;var c=1;c=Math.min(c,Math.min(k/b,j/a));c=Math.max(c,l/b);b=Math.round(b*c);a=Math.round(a*c);return{x:b,y:a}};d.$2=function(a){if(!a.ctas||a.ctas.length===0)return null;var b=this.props.messageID,d=this.$5({height:a.height,width:a.width});a=a.ctas.map(function(a,e){return i.jsx(c("MPNCallToAction.react"),{width:d.x,callToAction:a,className:e===0?"_6isd":"",messageID:b},a.id)});return a};return b}(i.PureComponent);g["default"]=a}),98);
__d("MPNTemplateRenderer.react",["ChatPluginTemplateConverter","MPNButtonTemplate.react","MPNFallbackAttachment.react","MPNGenericTemplate.react","MPNHScrollTemplate.react","MPNMediaTemplate.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.render=function(){var a,b;b=(b=this.props.attachment)!=null?(b=b.share)!=null?(b=b.style_list)!=null?b[0]:b:b:b;var e=this.props.messageID;switch(b){case"h_scroll":return h.jsx(c("MPNHScrollTemplate.react"),{templates:d("ChatPluginTemplateConverter").convertSchemaToHScroll(this.props.attachment),messageID:e});case"business_message_items":a=(a=this.props.attachment)!=null?(a=a.share)!=null?(a=a.target)!=null?a.call_to_actions:a:a:a;if(a&&a.length>0)return h.jsx(c("MPNButtonTemplate.react"),{attachment:this.props.attachment,messageID:e});else return h.jsx(c("MPNGenericTemplate.react"),{template:d("ChatPluginTemplateConverter").convertLegacySchemaToGenericTemplate(this.props.attachment,!1),messageID:e,setFeedback:this.props.setFeedback});case"messenger_platform_media_attachment":return h.jsx(c("MPNMediaTemplate.react"),{template:d("ChatPluginTemplateConverter").convertLegacySchemaToMediaTemplate(this.props.attachment),messageID:e});case"messenger_generic_template":return((a=this.props.attachment.share)==null?void 0:(a=a.media)==null?void 0:a.playable)?h.jsx(c("MPNMediaTemplate.react"),{template:d("ChatPluginTemplateConverter").convertLightspeedSchemaToMediaTemplate(this.props.attachment),messageID:e}):h.jsx(c("MPNGenericTemplate.react"),{template:d("ChatPluginTemplateConverter").convertLightspeedSchemaToGenericTemplate(this.props.attachment.share),messageID:e});default:e=(a=this.props.attachment)!=null?(a=a.share)!=null?(a=a.media)!=null?a.image:a:a:a;a=(a=this.props.attachment)!=null?(a=a.share)!=null?a.title:a:a;return h.jsx(c("MPNFallbackAttachment.react"),{style:b,image:e,title:a})}};return b}(h.PureComponent);g["default"]=a}),98);
__d("MPNAttachmentRenderer.react",["cx","Image.react","LiveChatPluginFileAttachment.react","LiveChatPluginLinkShareAttachment.react","MPNE2ETestUtils","MPNFallbackAttachment.react","MPNTemplateRenderer.react","MWChatVideoPlayer.react","MercuryAttachment","MessagingPluginContext","MessengerSpinner.react","ShimButton.react","Sticker.react","StickerConstants","URI","VideoAutoplayManagerX.react","XStickerAssetController","guid","isLinkshimURI","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=360,k=290;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.render=function(){var a=this;return d("MercuryAttachment").get(this.props.message).filter(function(a){return a===Object(a)}).map(function(b){var d=null;switch(b.attach_type){case"animated_image":case"photo":d=a.$1(b);break;case"sticker":d=a.$2(b);break;case"video":d=a.$3(b);break;case"share":d=a.$4(b);break;case"file":return a.$5(b);default:var e;e=(e=b)!=null?(e=e.media)!=null?e.image:e:e;d=i.jsx(c("MPNFallbackAttachment.react"),{style:b.attach_type,image:e,title:b.title});break}e=(b==null?void 0:(e=b.share)==null?void 0:e.style_list[0])==="h_scroll";return i.jsx("div",{className:"_a179"+(e?" _a42w":""),children:d},a.$6(b))})};e.$1=function(a){return i.jsx(c("Image.react"),{className:"_2k7y",onClick:this.props.onMessageClick,src:a.large_preview_url||a.preview_url})};e.$2=function(a){a=a.metadata;return!a?null:i.jsx(c("ShimButton.react"),{onClick:this.props.onMessageClick,children:i.jsx(c("Sticker.react"),{accessibilityLabel:a.accessibilityLabel,animationTrigger:"load_and_hover",customColor:this.context.state.threadCSSColor,frameCount:a.frameCount||1,frameRate:a.frameRate||c("StickerConstants").DEFAULT_FRAME_RATE,framesPerCol:a.framesPerCol||1,framesPerRow:a.framesPerRow||1,paddedSpriteURI:a.paddedSpriteURI,sourceHeight:a.height,sourceURI:c("XStickerAssetController").getURIBuilder().setInt("sticker_id",a.stickerID).getURI().toString(),sourceWidth:a.width,stickerID:a.stickerID.toString(),spriteURI:a.spriteURI})})};e.$3=function(a){a=this.$7(a);if(a===null||a===void 0)return null;var b=i.jsx(c("VideoAutoplayManagerX.react"),{children:i.jsx(c("MWChatVideoPlayer.react"),{controls:"mwchat",fbid:a.fbid,originalHeight:a.original_dimensions.y,originalWidth:a.original_dimensions.x,sdSrc:a.url})});return i.jsx(i.Suspense,{fallback:i.jsx("div",{style:{width:a.original_dimensions.x,height:a.original_dimensions.y},children:i.jsx("div",{className:"spinner",children:i.jsx(c("MessengerSpinner.react"),{color:"blue",size:c("MessengerSpinner.react").medium_size})})}),children:i.jsx("div",{"data-testid":void 0,children:b})})};e.$4=function(a){var b,d,e,f=this.$8();e=(e=a)!=null?(e=e.share)!=null?e.uri:e:e;b=(b=this.props.message)==null?void 0:b.message_id;d=a==null?void 0:(d=a.share)==null?void 0:d.style_list;var g="fallback";d!=null&&d.length>0&&(g=d[0]);d=f!=null||g=="business_message_items"||g=="messenger_generic_template"||g=="h_scroll";if(d)return i.jsx(c("MPNTemplateRenderer.react"),{attachment:a,messageID:b,setFeedback:this.props.setFeedback});else if(e&&c("isLinkshimURI")(new(c("URI"))(e))){var h;d=(f=a)!=null?(f=f.share)!=null?f.description:f:f;f=(b=a)!=null?(b=b.share)!=null?(b=b.media)!=null?b.image:b:b:b;b=(b=a)!=null?(b=b.share)!=null?b.source:b:b;h=(h=a)!=null?(h=h.share)!=null?h.title:h:h;return i.jsx(c("LiveChatPluginLinkShareAttachment.react"),{description:d,image:f,source:b,title:h,uri:e})}else{f=(d=a)!=null?(d=d.share)!=null?(d=d.media)!=null?d.image:d:d:d;h=(b=a)!=null?(b=b.share)!=null?b.title:b:b;return i.jsx(c("MPNFallbackAttachment.react"),{style:g,image:f,title:h})}};e.$5=function(a){return i.jsx(c("ShimButton.react"),{className:"_a179",onClick:this.props.onMessageClick,style:{border:"none"},children:i.jsx("div",{className:"_46jp",children:i.jsx(c("LiveChatPluginFileAttachment.react"),{attachment:a,isFromViewer:this.props.isFromViewer},"file:"+a.url)})},this.$6(a))};e.$6=function(a){if(a.deduplication_key)return a.deduplication_key;if(a.metadata&&a.metadata.fbid)return a.metadata.fbid;return a.upload_id?a.upload_id:c("guid")()};e.$7=function(a){var b,c;if(!a.metadata)return null;c=((c=a)!=null?(c=c.metadata)!=null?(c=c.dimensions)!=null?c.width:c:c:c)||k;b=((b=a)!=null?(b=b.metadata)!=null?(b=b.dimensions)!=null?b.height:b:b:b)||j;c=c/b;b={x:c>=1?k:Math.round(j*c),y:c>=1?Math.round(k/c):j};return{legacy_attachment_id:a.metadata.fbid,original_dimensions:b,start_muted:!0,no_fullscreen:!0,hide_controls_on_finish:!0,url:a.url}};e.$8=function(){try{var a=this.props.message.platform_xmd;if(a){a=JSON.parse(a);if(a)return a}}catch(a){}return null};e.$9=function(a){if(a.attach_type==="sticker")return!1;if(a.attach_type==="share"){var b=this.$8();a=(a=a)!=null?(a=a.share)!=null?(a=a.style_list)!=null?a[0]:a:a:a;if(b&&a==="h_scroll")return!1}return!0};return b}(i.PureComponent);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("MPNQuickReplyContainer.react",["cx","MPNConstants","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.layout;a=a.children;b=b===d("MPNConstants").MPNQuickReplyLayout.HORIZONTAL;return i.jsx("div",{className:(b?"_9k7q":"")+(b?"":" _9k7r"),children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MPNQuickReplyPill.react",["cx","ShimButton.react","Tooltip.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.children,d=a.onClick,e=a.disabled;a=a.tooltip;e=i.jsx(c("ShimButton.react"),{"data-testid":void 0,className:"_9k7s"+(e?" _9k7t":""),onClick:d,children:b});return a!==void 0?i.jsx(c("Tooltip.react"),{tooltip:a,children:e}):e}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MPNIcebreakers.react",["LiveChatPluginLoggerUtil","MPNConstants","MPNIdentity","MPNQuickReplyContainer.react","MPNQuickReplyPill.react","MessagingPluginContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useContext,j=b.useEffect;function a(a){a=i(c("MessagingPluginContext")).state;var b=a.icebreakers,e=a.icebreakerCtas,f=a.pageID,g=a.messageStore;a.locale;var k=a.refererUri;j(function(){b!=null&&b.length>0&&d("LiveChatPluginLoggerUtil").logImpressionUsingFalco(f,"icebreakers",null,null,null,null,d("MPNIdentity").MPNIdentity.currentUserID())},[f,b]);if(!b)return null;var l=function(a){var b=d("MPNIdentity").MPNIdentity.currentUserID();if(b==null)return;b=d("MPNIdentity").MPNIdentity.currentUserState();var c=b===d("MPNIdentity").MPNIdentityState.FB;if(b!==d("MPNIdentity").MPNIdentityState.GUEST&&b!==d("MPNIdentity").MPNIdentityState.FB)return;else{if(!g||!g.sendQueue)return;b=g.sendQueue;if(!b)return;b.enqueueAndSend(a.title,c,k,b.makePlatformTokenForPostbackCTA(a.id))}n()},m=function(a){var b=d("MPNIdentity").MPNIdentity.currentUserID();if(b==null)return;b=d("MPNIdentity").MPNIdentity.currentUserState();var c=b===d("MPNIdentity").MPNIdentityState.FB;if(b!==d("MPNIdentity").MPNIdentityState.GUEST&&b!==d("MPNIdentity").MPNIdentityState.FB)return;else{if(!g||!g.sendQueue)return;b=g.sendQueue;if(!b)return;b.enqueueAndSend(a,c,k)}n()},n=function(){var a=d("MPNIdentity").MPNIdentity.currentUserID();if(a==null)return;var b=d("MPNIdentity").MPNIdentity.currentUserState();b===d("MPNIdentity").MPNIdentityState.GUEST?d("LiveChatPluginLoggerUtil").logActionUsingFalco(a,f,"guest_chat_tab","message_send",null,null,null,"true"):d("LiveChatPluginLoggerUtil").logActionUsingFalco(a,f,"logged_in_chat_tab","message_send",null,null,null,"true")};e!=null&&e.length>0?a=e.map(function(a,b){return h.jsx(c("MPNQuickReplyPill.react"),{onClick:function(){return l(a)},children:a.title},b)}):a=b.map(function(a,b){return h.jsx(c("MPNQuickReplyPill.react"),{onClick:function(){return m(a.message)},children:a.message},a.messageKey+b)});return h.jsx(c("MPNQuickReplyContainer.react"),{layout:d("MPNConstants").MPNQuickReplyLayout.VERTICAL,children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MPNIcebreakersGroup.react",["MPNIcebreakers.react","MPNIdentity","MessagingPluginContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext;function a(a){var b=a.threadID,e=a.messages,f=a.store,g=i(c("MessagingPluginContext")).state.hasAutomation;a=function(){var a=d("MPNIdentity").MPNIdentity.currentUserState();a===d("MPNIdentity").MPNIdentityState.FB?a=f!=null&&f.hasFetchedAll()&&e.size===0:a=!g&&(e.size===0||f!=null&&f.hasFetchedAll()&&e.size===1&&e.get(0).action_type==="ma-type:log-message");return a};a=a();return a?h.jsx(c("MPNIcebreakers.react"),{threadID:b}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MPNLogMessage.react",["cx","Link.react","LinkCTAXMATAsyncLink.react","MessengerTextWithEntities.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b;b=(b=a.message)!=null?(b=b.log_message_data)!=null?b.message_type:b:b;var d=null;switch(b){case"link_cta":if(a.message.log_message_data!=null&&a.message.log_message_data.untypedData!==null){b=a.message.log_message_data.untypedData;var e=b.primary_text?b.primary_text:b.link_cta_xmat_primary_text,f=b.primary_text?b.cta_text:b.link_cta_xmat_cta_text;if(b.www_is_async_url){var g=b.async_url;d=i.jsxs("div",{children:[e," ",i.jsx(c("LinkCTAXMATAsyncLink.react"),{text:f,uri:g})]})}else{g=b.primary_text?b.cta_url:b.link_cta_xmat_cta_url;d=i.jsxs("div",{children:[e," ",i.jsx(c("Link.react"),{href:g,children:f})]})}}else d=null;break;default:d=i.jsx(c("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:a.message.log_message_body})}return i.jsx("div",{className:"logMessage",children:d})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MPNMessageAttachment.react",["cx","MPNAttachmentRenderer.react","MessengerHotLikeSVGReact.re","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.message,e=a.isFromViewer,f=a.backgroundColor,g=a.onMessageClick,h=a.setFeedback;a=function(){return b.is_like_preview?i.jsx("div",{className:"_8gn6 _8gn7",children:i.jsx(d("MessengerHotLikeSVGReact.re").make,{color:f})}):i.jsx(c("MPNAttachmentRenderer.react"),{backgroundColor:f,isFromViewer:e,message:b,onMessageClick:g,setFeedback:h})};var j=null;if(b.has_attachment||b.attachments.length>0){a=a();a&&(j=i.jsx("div",{className:"_4xko _2k7w"+(e?"":" _4xkr")+(e?" _4xks":""),children:a},"a:"+b.message_id))}return j}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MPNMessageBubble.react",["cx","EmojiOnlyMessage.react","MessengerSupportedEmojiUtils","MessengerTextWithEntities.react","ShimButton.react","UnicodeUtils","getURLRanges","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.message,e=a.isFromViewer,g=a.backgroundColor,h=a.emojis;a=a.onMessageClick;var j=function(a){return d("MessengerSupportedEmojiUtils").isSupportedEmojiKey(a)};function k(a){var b=d("UnicodeUtils").strlen(a),e=c("getURLRanges")(a).filter(function(a){return a!==void 0&&a!==null});e=e.filter(function(a){return a.offset>=0&&a.offset+a.length<=b}).map(function(a){return babelHelpers["extends"]({},a,{offset:a.offset})});return i.jsx(c("MessengerTextWithEntities.react"),{isSupportedEmoji:j,ranges:e,renderEmoji:!0,renderEmoticons:!0,text:a})}k.displayName=k.name+" [from "+f.id+"]";var l=null;h&&h.length>0?l=i.jsx(c("EmojiOnlyMessage.react"),{contents:h}):b.body&&(l=k(b.body));return l?i.jsx(c("ShimButton.react"),{className:"_4xko"+(h?" _gb1":"")+(e?"":" _4xkr")+(e?" _4xks":""),onClick:a,style:{backgroundColor:g},tabIndex:"0",children:l},"t:"+b.message_id):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MPNMessageDeliveryState.react",["cx","fbt","MercuryMessageDeliveryState","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");function a(a){var b=a.deliveryState,d=a.deliveryStateTitle,e=a.isFromViewer,f=a.showDeliveryState,g=a.showErrorMessage;a=a.threadCSSColor;if(!e||!f||b===c("MercuryMessageDeliveryState").UNKNOWN||g||b===c("MercuryMessageDeliveryState").ERROR)return null;e={};(b===c("MercuryMessageDeliveryState").SENT||b===c("MercuryMessageDeliveryState").SENDING||b===c("MercuryMessageDeliveryState").DELIVERED)&&(e.color=a);return j.jsx("span",{className:"_21c6"+(b===c("MercuryMessageDeliveryState").SENDING?" _4f-a":"")+(b===c("MercuryMessageDeliveryState").SENT?" _4f-b":"")+(b===c("MercuryMessageDeliveryState").DELIVERED?" _21c8":""),style:e,title:d,children:j.jsx("i",{"aria-label":d,"aria-roledescription":i._(/*FBT_CALL*/"Status icon"/*FBT_CALL*/),className:b!==c("MercuryMessageDeliveryState").SENDING?"_21c7":"",role:"img"})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MPNMessageErrorMessage.react",["cx","fbt","ChatPluginMessengerErrorMessageIconSVG.react","LiveChatPluginConstants","MercuryMessageDeliveryState","Text.react","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");function a(a){var b=a.connectionState,e=a.deliveryState,f=a.deliveryStateTitle,g=a.isFromViewer,h=a.setShowErrorMessage;a=a.showErrorMessage;if(!g)return null;g=a;e===c("MercuryMessageDeliveryState").ERROR||e===c("MercuryMessageDeliveryState").SENDING&&b!==d("LiveChatPluginConstants").MQTTGatewayConnectionState.CONNECTED&&!navigator.userAgent.includes("Firefox")?(h(!0),g=!0):e!==c("MercuryMessageDeliveryState").ERROR&&a&&(h(!1),g=!1);return j.jsxs(c("Text.react"),{className:"_6934"+(g?"":" noDisplay"),onClick:function(){},children:[i._(/*FBT_CALL*/"This message didn't send."/*FBT_CALL*/),j.jsx("span",{className:"_21c6 error",title:f,children:j.jsx(c("ChatPluginMessengerErrorMessageIconSVG.react"),{})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MPNMessageSeenHead.react",["cx","fbt","Image.react","MercuryTimestamp","MessagingPluginContext","MessengerMessage.bs","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=d("react").useContext;function a(a){var b=a.showSeenHead,e=a.message;a=a.readReceipt;var f=k(c("MessagingPluginContext"));f=f.state;var g=f.pageName;f=f.pageProfilePictureUri;var h=f!==null&&f!==void 0&&f!=="";if(d("MessengerMessage.bs").isSending(e)||d("MessengerMessage.bs").hasError(e)||!h||!b||a==null)return null;e=a.action/1e3;h=Object.keys(a).length?i._(/*FBT_CALL*/"Seen by {full name} at {seen time}"/*FBT_CALL*/,[i._param("full name",g),i._param("seen time",d("MercuryTimestamp").getPreciseTimestamp(e))]):i._(/*FBT_CALL*/"Seen by {full name}"/*FBT_CALL*/,[i._param("full name",g)]);return j.jsx("span",{className:"_21c4",children:j.jsx(c("Image.react"),{alt:h,className:"_21c5",src:f,title:h})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MPNMessageState.react",["cx","fbt","MercuryMessageDeliveryState","MercuryTimestamp","Text.react","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");function a(a){var b=a.deliveryState,e=a.deliveryStateTitle,f=a.isFromViewer,g=a.lastMessageID,h=a.message,k=a.readReceipt,l=a.showSeenHead,m=a.showSentAndSeenHead;a=a.showTimestamp;if(!a||b===c("MercuryMessageDeliveryState").ERROR)return null;a=!m||k==null||m&&(!f||h.timestamp<k.action&&g!==h.message_id);b=m&&l&&f&&g!==null;h=e;a?h=i._(/*FBT_CALL*/"Seen"/*FBT_CALL*/):b&&(h=k!==null&&k!==void 0?i._(/*FBT_CALL*/"{=m0}{seen time}"/*FBT_CALL*/,[i._param("seen time",d("MercuryTimestamp").getPreciseTimestamp(k.action)),i._implicitParam("=m0",j.jsx(c("Text.react"),{style:{fontWeight:"800",paddingRight:"3px"},children:i._(/*FBT_CALL*/"Seen"/*FBT_CALL*/)}))]):null);return j.jsx(c("Text.react"),{className:"_9w6e"+(f?" _9w6f":"")+(f?"":" _9w6g"),children:h})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MPNMessage.react",["cssVar","cx","Arbiter","LiveChatPluginConstants","LiveChatPluginFbts","LiveChatPluginLoggerUtil","MPNIdentity","MPNMessageAttachment.react","MPNMessageBubble.react","MPNMessageDeliveryState.react","MPNMessageErrorMessage.react","MPNMessageSeenHead.react","MPNMessageState.react","MessagingPluginContext","MessengerDateBreak.re","MessengerMessage.bs","MessengerSupportedEmojiUtils","ReactDOM","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.state={emojis:null,showTimestamp:!1},e.$1=!1,e.$5=function(){var a=e.context.state,b=a.guestID;a=a.pageID;if(e.props.message.message_id=="welcome_message")return;e.setState(function(a){a=!a.showTimestamp;e.props.showTimestampHandler(a&&e.props.isLastMessageInGroup&&!e.props.isFromViewer);a&&c("Arbiter").inform(d("LiveChatPluginConstants").CLOSE_TIMESTAMPS);return{showTimestamp:a}});d("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",b,a,d("MPNIdentity").MPNIdentity.currentUserState()===d("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":"guest_chat_tab",{action_type:"customer_chat_message_bubble_clicked"})},e.$6=function(a){e.$1=a},b)||babelHelpers.assertThisInitialized(e)}var e=b.prototype;e.componentDidMount=function(){var a=this;if(this.props.message.body){var b=d("MessengerSupportedEmojiUtils").getEmojiOnlyContents(this.props.message.body);this.setState({emojis:b})}this.$2=c("Arbiter").subscribe(d("LiveChatPluginConstants").CLOSE_TIMESTAMPS,function(b){a.state.showTimestamp&&(a.setState({showTimestamp:!1}),a.props.isLastMessageInGroup&&!a.props.isFromViewer&&a.props.showTimestampHandler(!1))})};e.componentDidUpdate=function(){if(this.state.showTimestamp){var a=d("ReactDOM").findDOMNode(this);a instanceof HTMLElement&&this.props.scrollIntoView(a,this.props.dateBreakPreceeds)}};e.componentWillUnmount=function(){c("Arbiter").unsubscribe(this.$2)};e.render=function(){var a=this.props,b=a.connectionState,e=a.isFromViewer,f=a.lastMessageID,g=a.message,h=a.readReceipt,i=a.showDeliveryState;a=a.showSentAndSeenHead;if(g.is_filtered_content)return null;var k=d("MessengerMessage.bs").getDeliveryState(this.props.message,this.props.deliveryTimestamp),l=d("LiveChatPluginFbts").getDeliveryStateTitle(k),m="transparent";!this.state.emojis&&e?m=this.context.state.threadCSSColor:!this.state.emojis&&!e&&(m="rgba(0, 0, 0, 0.06)");var n=this.$3();return j.jsxs("div",{className:"_21c3",children:[this.$4(),j.jsxs("div",{className:"clearfix _2a0-",children:[j.jsx(c("MPNMessageBubble.react"),{message:g,isFromViewer:e,backgroundColor:m,emojis:this.state.emojis,onMessageClick:this.$5}),j.jsx(c("MPNMessageAttachment.react"),{message:g,isFromViewer:e,backgroundColor:m,onMessageClick:this.$5,setFeedback:this.props.setFeedback}),j.jsx(c("MPNMessageSeenHead.react"),{showSeenHead:n,message:g,readReceipt:h}),j.jsx(c("MPNMessageErrorMessage.react"),{connectionState:b,deliveryState:k,deliveryStateTitle:l,isFromViewer:e,setShowErrorMessage:this.$6,showErrorMessage:this.$1}),j.jsx(c("MPNMessageDeliveryState.react"),{deliveryState:k,deliveryStateTitle:l,isFromViewer:e,showDeliveryState:i,showErrorMessage:this.$1,threadCSSColor:this.context.state.threadCSSColor})]}),j.jsx(c("MPNMessageState.react"),{deliveryState:k,deliveryStateTitle:l,isFromViewer:e,lastMessageID:f,message:g,readReceipt:h,showSeenHead:n,showSentAndSeenHead:a,showTimestamp:this.state.showTimestamp})]})};e.$4=function(){return!this.state.showTimestamp||this.props.dateBreakPreceeds?null:j.jsx(d("MessengerDateBreak.re").make,{className:"datebreak",date:new Date(this.props.message.timestamp)})};e.$3=function(){var a=this.props,b=a.message,c=a.isFromViewer,d=a.isLastMessageInGroup,e=a.lastReadTimestamp,f=a.showSentAndSeenHead;a=a.nextMessageTimestamp;if(!f)return!1;if(c&&!(e===Infinity&&d&&a===Infinity||e===b.timestamp||e>b.timestamp&&e<a))return!1;else if(!c&&e!==b.timestamp)return!1;return!0};return b}(j.PureComponent);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("MPNMessageGroup.react",["cx","fbt","MPNMessage.react","MessagingPluginContext","MessagingPluginMobileProfilePicture.react","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={showTimestamp:!1},c.$2=function(a){if(c.props.isFromViewer)return;c.setState({showTimestamp:a})},b)||babelHelpers.assertThisInitialized(c)}var d=b.prototype;d.render=function(){var a,b=this;a=this.props.isFromViewer?null:j.jsx("div",{className:"profilePictureColumn",style:{bottom:this.state.showTimestamp?"15px":"0px"},children:j.jsx(c("MessagingPluginMobileProfilePicture.react"),{personaProfilePictureUri:(a=this.props.persona)==null?void 0:a.profile_picture_url,className:"profilePicture",disableStatusIndicator:!0})});var d=this.props.messages.map(function(a,d){return j.jsx(c("MPNMessage.react"),{connectionState:b.props.connectionState,dateBreakPreceeds:b.props.dateBreakPreceeds&&d===0,deliveryTimestamp:b.props.deliveryTimestamp,isFromViewer:b.props.isFromViewer,isLastMessageInGroup:d===b.props.messages.length-1,lastMessageID:b.props.lastMessageID,lastReadTimestamp:b.props.lastReadTimestamp,message:a,nextMessageTimestamp:b.$1(d),readReceipt:b.props.readReceipt,scrollIntoView:b.props.scrollIntoView,showDeliveryState:a.timestamp>b.props.lastReadTimestamp,showSentAndSeenHead:b.props.nextGroupTimestamp>=b.props.lastReadTimestamp,showTimestampHandler:b.$2,attachmentDidUpdate:a.attachments.length>0,setFeedback:b.props.setFeedback},a.message_id)});return j.jsxs("div",{className:"_4xkn clearfix",children:[a,j.jsxs("div",{className:"messages",children:[this.$3(),j.jsx("div",{children:d})]})]})};d.$3=function(){var a=this.context.state.pageName;if(this.props.persona!=null){a=i._(/*FBT_CALL*/"{persona name} from {page name}"/*FBT_CALL*/,[i._param("persona name",this.props.persona.name),i._param("page name",a)]);var b=a.toString();return j.jsx("div",{"aria-label":b,className:"_9e1n",children:a})}return null};d.$1=function(a){return a<this.props.messages.length-1?this.props.messages[a+1].timestamp:this.props.nextGroupTimestamp};return b}(j.PureComponent);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("MPNMessageList.react",["cx","MPNIdentity","MPNLogMessage.react","MPNMessageGroup.react","MPNMessageListDataHelper","MercuryIDs","MercuryMessageGroup","MessagingPluginContext","MessengerDateBreak.re","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=1e3*60*60;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.state={messageGroups:d("MercuryMessageGroup").calculateMessageGroups(c.props.messages)},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.UNSAFE_componentWillReceiveProps=function(a){a.messages!==this.props.messages&&this.setState({messageGroups:d("MercuryMessageGroup").calculateMessageGroups(a.messages)})};e.render=function(){var a=d("MPNIdentity").MPNIdentity.currentUserID();if(a==null)return null;var b=[],e=this.state.messageGroups,f=this.props.readReceipt,g=f?f.watermark:0,h=this.props.messages.last()?this.props.messages.last().message_id:null;for(var k=0;k<e.length;k++){var l=k>0?e[k-1]:null;l=l?l[l.length-1]:null;var m=e[k],n=m[0],o=m[m.length-1],p=!1;(!l||n.timestamp-l.timestamp>j)&&(b.push(i.jsx(d("MessengerDateBreak.re").make,{className:"datebreak",date:new Date(n.timestamp)},"db:"+n.message_id)),p=!0);if(n.action_type==="ma-type:log-message"){m.filter(function(a){return a.log_message_type!=="log:error-msg"&&a.log_message_body}).map(function(a){return b.push(i.jsx(c("MPNLogMessage.react"),{message:a},"mg:"+a.message_id))});continue}l=d("MPNMessageListDataHelper").getNextTimestamp(e,k);var q=d("MPNMessageListDataHelper").receiptInRange(f,m,l),r=d("MPNMessageListDataHelper").getLastReadTimestamp(g,o),s=d("MPNMessageListDataHelper").getOptimizedDeliveryTimestamp(o,this.props.deliveryTimestamp);o=d("MPNMessageListDataHelper").getPersona(o);var t=n.author===d("MercuryIDs").getParticipantIDFromUserID(a);b.push(i.jsx(c("MPNMessageGroup.react"),{persona:o,connectionState:this.props.connectionState,dateBreakPreceeds:p,deliveryTimestamp:s,isFromViewer:t,lastMessageID:h,lastReadTimestamp:r,messages:m,nextGroupTimestamp:l,readReceipt:q?f:null,scrollIntoView:this.props.scrollIntoView,setFeedback:this.props.setFeedback},"mg:"+n.message_id))}return b};return b}(i.PureComponent);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("MPNQuickReplies.react",["cx","fbt","Image.react","LiveChatPluginLoggerUtil","MPNConstants","MPNIdentity","MPNQuickReplyContainer.react","MPNQuickReplyPill.react","MessagingPluginContext","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){b=a.call(this,b,c)||this;c=d("MPNIdentity").MPNIdentity.currentUserID();b.$1=d("MPNIdentity").MPNIdentity.currentUserState()===d("MPNIdentity").MPNIdentityState.FB&&!!c;if(b.context.state.hasActiveAutomation&&b.props.quickReplies.length>0){c=b.props.quickReplies.map(function(a){return a.title});d("LiveChatPluginLoggerUtil").logNewImpressionEvents("automation_faq_impression",b.context.state.pageID,b.context.state.accessToken?"guest_chat_tab":"logged_in_chat_tab",{faq_titles:JSON.stringify(c)})}return b}var e=b.prototype;e.render=function(){var a=this,b=this.props.quickReplies.map(function(b,e){var f=b.content_type;switch(f){case d("MPNConstants").MPNQuickReplyContentType.TEXT:f=b.image_url?j.jsx(c("Image.react"),{className:"_95s6",src:b.image_url}):null;return j.jsxs(c("MPNQuickReplyPill.react"),{onClick:function(){a.$2(b,b.title,e)},children:[f,b.title]},e);case d("MPNConstants").MPNQuickReplyContentType.USER_EMAIL:case d("MPNConstants").MPNQuickReplyContentType.USER_PHONE_NUMBER:case d("MPNConstants").MPNQuickReplyContentType.USER_STATE:case d("MPNConstants").MPNQuickReplyContentType.USER_ZIP_CODE:return a.$3(b,e);default:return j.jsx(c("MPNQuickReplyPill.react"),{disabled:!0,tooltip:i._(/*FBT_CALL*/"To use this feature, use the Messenger app."/*FBT_CALL*/),children:b.title},e)}}),e=this.props.type==="horizontal"?d("MPNConstants").MPNQuickReplyLayout.HORIZONTAL:d("MPNConstants").MPNQuickReplyLayout.VERTICAL;return j.jsx(c("MPNQuickReplyContainer.react"),{layout:e,children:b})};e.$2=function(a,b,c){var e=this.context.state,f=e.pageID,g=e.accessToken,h=e.messageStore,i=e.hasActiveAutomation;e=e.refererUri;var j=d("MPNIdentity").MPNIdentity.currentUserState(),k=d("MPNIdentity").MPNIdentity.currentUserID();if(j!==d("MPNIdentity").MPNIdentityState.GUEST&&j!==d("MPNIdentity").MPNIdentityState.FB)return;else{j=h.sendQueue;if(!j)return;j.enqueueAndSend(b,this.$1,e,j.makePlatformTokenForQuickReply(a))}d("LiveChatPluginLoggerUtil").logActionFromNewUI("in_thread_action",k,f,g?"guest_chat_tab":"logged_in_chat_tab",{action_type:"customer_chat_quick_reply_clicked"});i&&d("LiveChatPluginLoggerUtil").logActionFromNewUI("automation_faq_sent",k,f,g?"guest_chat_tab":"logged_in_chat_tab",{faq_index:c.toString(),faq_title:b})};e.$3=function(a,b){var e=this,f=null;switch(a.content_type){case d("MPNConstants").MPNQuickReplyContentType.USER_EMAIL:f=this.props.viewerEmail;a.payload=f;break;case d("MPNConstants").MPNQuickReplyContentType.USER_PHONE_NUMBER:f=this.props.viewerPhone;a.payload=f;break;case d("MPNConstants").MPNQuickReplyContentType.USER_STATE:f=this.props.viewerState;a.payload=f;break;case d("MPNConstants").MPNQuickReplyContentType.USER_ZIP_CODE:f=this.props.viewerZipCode;a.payload=f;break;default:break}if(!f)return null;else return j.jsx(c("MPNQuickReplyPill.react"),{onClick:function(){e.$2(a,String(f),b)},children:f},b)};return b}(j.PureComponent);a.defaultProps={type:"horizontal"};a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("LiveChatPluginUserContactQuery",["LiveChatPluginLoggerUtil","LiveChatPluginUserContactQuery.graphql","RelayFBEnvironment","RelayModern","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("LiveChatPluginUserContactQuery.graphql");a=function(a,b){c("promiseDone")(d("RelayModern").fetchQuery(c("RelayFBEnvironment"),i,{}),function(b){var c;c=b==null?void 0:(c=b.viewer)==null?void 0:(c=c.user)==null?void 0:c.all_phones;var d=c?c.find(function(a){return a.is_preferred}):null;!d&&c&&c[0]&&(d=c[0]);b=b==null?void 0:(c=b.viewer)==null?void 0:c.all_emails;c=b?b.find(function(a){return a.is_primary}):null;!c&&b&&b[0]&&(c=b[0]);a({phone:(b=(b=d)==null?void 0:(d=b.phone_number)==null?void 0:d.universal_number)!=null?b:"",email:(b=(d=c)==null?void 0:d.display_email)!=null?b:""})},function(a){d("LiveChatPluginLoggerUtil").logNewImpressionEvents("live_chat_user_contact_fetch_failed",b,null,null,JSON.stringify(babelHelpers["extends"]({},d("LiveChatPluginLoggerUtil").getErrorData(a))))})};g.fetch=a}),98);
__d("MPNQuickRepliesGroup.react",["LiveChatPluginUserContactQuery","MPNConstants","MPNMessageListDataHelper","MPNQuickReplies.react","MessagingPluginContext","MessengerUserProfileLocationUtils","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={viewerEmail:null,viewerPhone:null,viewerState:null,viewerZipCode:null},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidUpdate=function(){var a=this.$1();if(a){var b=!1,c=!1;a.data.forEach(function(a){a.content_type===d("MPNConstants").MPNQuickReplyContentType.USER_EMAIL||a.content_type===d("MPNConstants").MPNQuickReplyContentType.USER_PHONE_NUMBER?b=!0:(a.content_type===d("MPNConstants").MPNQuickReplyContentType.USER_STATE||a.content_type===d("MPNConstants").MPNQuickReplyContentType.USER_ZIP_CODE)&&(c=!0)});b&&this.$2();c&&this.$3()}};e.render=function(){var a=this.$1();return!a?null:h.jsx(c("MPNQuickReplies.react"),{quickReplies:a.data,type:a.type,viewerEmail:this.state.viewerEmail,viewerPhone:this.state.viewerPhone,viewerState:this.state.viewerState,viewerZipCode:this.state.viewerZipCode})};e.$1=function(){var a=this.props,b=a.messages;a=a.userID;b=d("MPNMessageListDataHelper").maybeFetchMessagePlatformXMD(b,a);if(b&&b.quick_replies&&b.quick_replies.length>0){return{data:b.quick_replies,type:(a=b.quick_reply_type)!=null?a:"horizontal"}}return null};e.$2=function(){var a=this;if(this.state.viewerEmail!==null&&this.state.viewerPhone!==null)return;d("LiveChatPluginUserContactQuery").fetch(function(b){a.setState({viewerEmail:b.email,viewerPhone:b.phone})},this.context.state.pageID)};e.$3=function(){var a=this;if(this.state.viewerState!==null&&this.state.viewerZipCode!==null)return;c("promiseDone")(d("MessengerUserProfileLocationUtils").FetchMessengerUserRegionAndPostalCode(),function(b){var c=b==null?void 0:b.region;b=b==null?void 0:b.postal_code;a.setState({viewerState:c,viewerZipCode:b})})};return b}(h.PureComponent);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);
__d("LivechatPluginGuestMessageThreadQueryContainer.react",["Arbiter","LiveChatPluginConstants","LiveChatPluginLoggerUtil","LivechatPluginGuestMessageThreadQueryContainerQuery.graphql","RelayModern","getLiveChatPluginGuestUserRelayEnvironment","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=h!==void 0?h:h=b("LivechatPluginGuestMessageThreadQueryContainerQuery.graphql");function a(a,b){c("promiseDone")(d("RelayModern").fetchQuery(c("getLiveChatPluginGuestUserRelayEnvironment")(!1),j,{data:{page_id:a}},{force:!0}),function(a){b(a)},function(b){d("LiveChatPluginLoggerUtil").logNewImpressionEvents("customer_chat_guest_message_list_fetch_failed",a,null,null,JSON.stringify({error:b}))})}function e(a){var b=a.pageID;return i.jsx(d("RelayModern").QueryRenderer,{environment:c("getLiveChatPluginGuestUserRelayEnvironment")(!1),query:j,cacheConfig:{force:!0},variables:{data:{page_id:b}},render:function(a){var e=a.error;a=a.props;if(e){d("LiveChatPluginLoggerUtil").logNewImpressionEvents("customer_chat_guest_message_list_fetch_failed",b,null,null,JSON.stringify({error:e}));return}c("Arbiter").inform(d("LiveChatPluginConstants").UPDATE_MESSAGE_LIST,a);return i.jsx("div",{})}})}e.displayName=e.name+" [from "+f.id+"]";g.LivechatPluginGuestMessageThreadQueryFetchOnce=a;g.LivechatPluginGuestMessageThreadQueryContainer=e}),98);
__d("MercurySyncReadReceiptTransformer",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b={watermark:parseInt(a.watermarkTimestampMs,10),action:parseInt(a.actionTimestampMs,10)},c=a.threadKey.otherUserFbId||a.actorFbId;a=a.threadKey.otherUserFbId||a.threadKey.threadFbId;var d={roger:{}};d.roger[a]={};d.roger[a][c]=b;return d}f.transform=a}),66);
__d("MessagingPluginGraphQLUtils",["MNCommerceCallToActionType","immutable"],(function(a,b,c,d,e,f,g){function a(a){if(a==null)return null;if(a.guest_message_thread!=null&&a.guest_message_thread.messages!=null){var b=c("immutable").List(a.guest_message_thread.messages.nodes).map(function(b){return{action_type:b.extensible_message_admin_text_type!=null?"ma-type:log-message":"ma-type:user-generated-message",has_attachment:h(b),attachments:k(b),author:t(b.message_sender),author_email:b.message_sender&&b.message_sender.email,body:b.message&&b.message.text,folder:a.guest_message_thread&&a.guest_message_thread.folder,is_filtered_content:!1,is_sponsored:b.is_sponsored,thread_id:b.message_thread_key&&b.message_thread_key.other_user_id,thread_fbid:b.message_thread_key&&b.message_thread_key.thread_fbid,message_id:b.message_id,timestamp:Number(b.timestamp_precise),platform_xmd:b.platform_xmd_encoded,source:b.tags_list,is_unread:b.unread,offline_threading_id:b.offline_threading_id,log_message_body:b.snippet}});return b}return null}function b(a,b,c){return a.map(function(a){return{action_type:"ma-type:send-message",attachments:[],author:"fbid:"+b,author_email:b+"@facebook.com",body:a.body,folder:"INBOX",has_attachment:!1,is_filtered_content:!1,is_sponsored:!1,thread_id:c,thread_fbid:null,message_id:a.otid,timestamp:a.timestamp,source:[],is_unread:!1,offline_threading_id:a.otid,status:a.state}})}function d(a){var b;if(a==null)return null;if(((b=a.guest_message_thread)==null?void 0:(b=b.last_read_receipt)==null?void 0:b.nodes)!=null&&((b=a.guest_message_thread)==null?void 0:(b=b.last_read_receipt)==null?void 0:(b=b.nodes)==null?void 0:b.length)>0){b=a.guest_message_thread.last_read_receipt.nodes[0];return{action:Number(b.action),watermark:Number(b.watermark)}}return null}function e(a){return a==null?void 0:(a=a.guest_message_thread)==null?void 0:a.unread_count}function h(a){return i(a.blob_attachments)||j(a.extensible_attachment)}function i(a){return a!==null}function j(a){return a!=null}function k(a){return l(a.blob_attachments).concat(m(a))}function l(a){return!a?[]:a.map(function(a){if(a.video_type!=null)return{app_attribution:null,attach_type:"video",blurred_image_uri:null,icon_type:"attach:video",large_preview_url:a.image.uri,large_preview_height:null,large_preview_width:null,name:null,photo_encodings:[],preview_height:null,preview_url:null,preview_width:null,rel:"async",share:null,thumbnail_url:a.playable_url,url:a.playable_url,metadata:{fbid:a.legacy_attachment_id,dimensions:{width:a.original_dimensions.x,height:a.original_dimensions.y}}};else if(a.file_type!=null)return{app_attribution:null,attach_type:"file",blurred_image_uri:null,icon_type:"attach:file",large_preview_url:null,large_preview_height:null,large_preview_width:null,metadata:null,name:a.filename,photo_encodings:[],preview_height:null,preview_url:null,preview_width:null,rel:"async",share:null,thumbnail_url:null,url:a.url};else if(a.animated_image!=null)return{app_attribution:null,attach_type:"animated_image",blurred_image_uri:null,icon_type:"attach:animated_image",large_preview_url:a.animated_image.uri,large_preview_height:a.animated_image.height,large_preview_width:a.animated_image.width,name:null,photo_encodings:[],preview_height:null,preview_url:null,preview_width:null,rel:"async",share:null,thumbnail_url:a.playable_url,url:a.image.uri,metadata:{fbid:a.legacy_attachment_id,dimensions:{width:a.original_dimensions.x,height:a.original_dimensions.y}}};else{var b;return{app_attribution:null,attach_type:"photo",blurred_image_uri:null,icon_type:"attach:image",large_preview_url:(b=a.image)==null?void 0:b.uri,large_preview_height:(b=a.image)==null?void 0:b.height,large_preview_width:(b=a.image)==null?void 0:b.width,metadata:null,name:null,photo_encodings:[],preview_height:null,preview_url:null,preview_width:null,rel:"async",share:null,thumbnail_url:null,url:null}}})}function m(a){var b,c=a.extensible_attachment;if(!c)return[];c=c.story_attachment;var d=c.target;return[{app_attribution:null,attach_type:"share",blurred_image_uri:null,icon_type:null,large_preview_url:null,large_preview_height:null,large_preview_width:null,metadata:null,name:null,photo_encodings:[],preview_height:null,preview_url:null,preview_width:null,rel:"async",thumbnail_url:null,url:null,share:{action_links:[],deduplication_key:c.deduplication_key,media:{animated_image:(b=c.media)==null?void 0:(b=b.animated_image)==null?void 0:b.uri,animated_image_size:{height:(b=c.media)==null?void 0:(b=b.animated_image)==null?void 0:b.height,width:(b=c.media)==null?void 0:(b=b.animated_image)==null?void 0:b.width},image:(b=c.media)==null?void 0:(b=b.image)==null?void 0:b.uri,image_size:{height:(b=c.media)==null?void 0:(b=b.image)==null?void 0:b.height,width:(b=c.media)==null?void 0:(b=b.image)==null?void 0:b.width},playable:(b=c.media)==null?void 0:b.is_playable},messenger_ctas:[],properties:{},share_id:a.message_id,source:(b=c.source)==null?void 0:b.text,style_list:c.style_list,subattachments:n(c),target:{call_to_actions:(b=d==null?void 0:(a=d.call_to_actions)==null?void 0:a.map(function(a){return s(a)}))!=null?b:[],items:p(d),message:d==null?void 0:d.snippet},title:(b=(a=c.title_with_entities)==null?void 0:a.text)!=null?b:o(d),description:c.subtitle,uri:d==null?void 0:d.url,messenger_generic_xma_template_extra_info:c.messenger_generic_xma_template_extra_info}}]}function n(a){if(!a||!a.target)return[];if(!a.subattachments)return[];var b=p(a.target);return a.subattachments.map(function(a,c){var d;return{action_links:[],deduplication_key:a.deduplication_key,media:{animated_image:(d=a.media)==null?void 0:(d=d.animated_image)==null?void 0:d.uri,animated_image_size:{height:(d=a.media)==null?void 0:(d=d.animated_image)==null?void 0:d.height,width:(d=a.media)==null?void 0:(d=d.animated_image)==null?void 0:d.width},image:(d=a.media)==null?void 0:(d=d.image)==null?void 0:d.uri,image_size:{height:(d=a.media)==null?void 0:(d=d.image)==null?void 0:d.height,width:(d=a.media)==null?void 0:(d=d.image)==null?void 0:d.width},playable:(d=a.media)==null?void 0:d.is_playable},messenger_ctas:[],properties:{},source:a.source.text,style_list:a.style_list,target:b[c]}})}function o(a){a=a==null?void 0:a.business_items;if(!a||!a.nodes)return"";var b="";for(var c=0;c<a.nodes.length-1;c++)b=b+a.nodes[c].name+", ";a.nodes[a.nodes.length-1]&&(b+=a.nodes[a.nodes.length-1].name);return b}function p(a){a=a==null?void 0:a.business_items;return!a||!a.nodes?[]:a.nodes.map(function(a){return q(a)})}function q(a){return!a?null:{call_to_actions:a.call_to_actions.map(function(a){return s(a)}),default_action:s(a.default_action),desc:a.description,id:a.id,image_aspect_ratio:a.image_aspect_ratio,item_url:a.target_url,media_blob_attachments:a.media_blob_attachments.map(function(a){return r(a)}),metalines:{metaline_1:a.first_metaline,metaline_2:a.second_metaline,metaline_3:a.third_metaline},name:a.name,source:a.source_name,text:"",thumb_url:a.image_url,title:a.name}}function r(a){return!a?null:{playable_url:a.playable_url,height:a.height,width:a.width,id:a.id}}function s(a){return!a?null:{action_link:a.action_url,action_type:c("MNCommerceCallToActionType")[a.action_open_type],action_open_type:a.action_open_type,action_objects:[{}],id:a.id,is_disabled:a.is_disabled,is_mutable_by_server:a.is_mutable_by_server,logging_token:a.logging_token,page_id:a.page_id,payment_metadata:null,render_style:a.cta_render_style,should_show_user_confirmation:!1,title:a.action_title,webview_metadata:null}}function t(a){return a!=null&&a.id!=null?"fbid:"+a.id:""}g.getMercuryPayloadFromGraphQLResponse=a;g.getMercuryPayloadFromOptimisticMessage=b;g.getLatestReadReceiptFromGraphQLResponse=d;g.getGuestThreadUnreadCount=e;g._hasAttachments=h;g._hasBlobAttachments=i;g._hasXMA=j;g._getAttachments=k;g._getBlobAttachments=l;g._getXMAFromMessageNode=m;g._buildSubattachmentsFromParentStory=n;g._getTargetTitleFromGraphQLTarget=o;g._getTargetItemsFromGraphQLTarget=p;g._getMercuryBusinessItemFromGraphQL=q;g._getMediaBlobAttachmentFromGraphQL=r;g._getMercuryCallToActionFromGraphQL=s;g._getAuthorFbid=t}),98);
__d("MessagingPluginPendingMessageState",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=4;f.SENDING=a;f.SENT=b;f.FAILED=c}),66);
__d("ChatPluginSendMessage",["ChatPluginSendMessageMutation.graphql","RelayModern","getLiveChatPluginGuestUserRelayEnvironment"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,f){d("RelayModern").commitMutation(c("getLiveChatPluginGuestUserRelayEnvironment")(a),{mutation:h!==void 0?h:h=b("ChatPluginSendMessageMutation.graphql"),variables:e,onCompleted:f&&f.onSuccess,onError:f&&f.onFailure})}g.commit=a}),98);
__d("XMNMessagingPluginActiveSessionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/plugin/customer_chat/active_session/",{page_id:{type:"FBID",required:!0},user_id:{type:"FBID",required:!0},access_token:{type:"String"},referer_uri:{type:"String"}})}),null);
__d("MessagingPluginSendQueue",["$InternalEnum","AsyncRequest","ChatPluginSendMessage","CurrentUser","LiveChatPluginLoggerUtil","MPNIdentity","MPNStorage","MessagingPluginPendingMessageState","Random","XMNMessagingPluginActiveSessionController","immutable"],(function(a,b,c,d,e,f,g){"use strict";var h=b("$InternalEnum")({TEXT:"text",POSTBACK:"postback",QUICK_REPLY:"quick_reply"});a=function(){function a(a,b,d,e){this.isSending=!1;this.pageID=a;this.userID=b;this.sessionKey=d;this.pendingMessages=c("immutable").List();this.serverPartialMessages=c("immutable").List();this.failedMessages=c("immutable").List();this.updateMessageStoreCallback=e;this.requestID=(a=c("MPNStorage").getRequestID())!=null?a:""}var b=a.prototype;b.getOptimisticMessages=function(){return this.pendingMessages.concat(this.failedMessages).concat(this.serverPartialMessages).sort(function(a,b){return a.timestamp-b.timestamp})};b.confirmServerPartialMessages=function(a){this.serverPartialMessages=this.serverPartialMessages.filter(function(b){var c=a.find(function(a){return a.otid===b.otid});return!c})};b.makePlatformTokenForPostbackCTA=function(a){var b;return JSON.stringify((b={},b[h.POSTBACK]={cta_id:a,prev_message_id:null,force_handle:!0,ref:null},b))};b.makePlatformTokenForQuickReply=function(a){var b;return JSON.stringify((b={},b[h.QUICK_REPLY]={payload:a.payload},b))};b.canQueueMessage=function(a,b,c){var e=d("MPNIdentity").MPNIdentity.currentUserState();if(e!==d("MPNIdentity").MPNIdentityState.FB&&e!==d("MPNIdentity").MPNIdentityState.GUEST)return!1;if(b)return!1;return a.trim().length>0||c&&Object.keys(c).length>0?!0:!1};b.prepareAttachmentsForMessage=function(a,b,c,e){if(d("MPNIdentity").MPNIdentity.currentUserState()===d("MPNIdentity").MPNIdentityState.GUEST)return;return{files:b.length>0?[].concat(b):void 0,gifs:a.length>0?[].concat(a):void 0,images:c.length>0?[].concat(c):void 0,videos:e.length>0?[].concat(e):void 0}};b.enqueueAndSend=function(a,b,c,e,f){var g=this.makeOfflineThreadingID();this.pendingMessages=this.pendingMessages.push({otid:g,body:a,timestamp:Date.now(),platformToken:e,state:d("MessagingPluginPendingMessageState").SENDING,attachmentIds:f});this.updateMessageStoreCallback&&this.updateMessageStoreCallback();this.isSending||this.sendNext(b,c)};b.sendNext=function(a,b){if(this.pendingMessages.size===0){this.isSending=!1;return}this.isSending=!0;var c=this.pendingMessages.first();this.performMutation(c,a,b)};b.performMutation=function(a,b,e){var f=this,g=c("CurrentUser").getID()!=="0",i={requestID:this.requestID,isLoggedIn:g.toString(),isLoggedInUserAction:g.toString()};g=c("XMNMessagingPluginActiveSessionController").getURIBuilder().setFBID("page_id",this.pageID).setFBID("user_id",this.userID).setString("access_token",this.sessionKey).setString("referer_uri",e).getURI();new(c("AsyncRequest"))().setURI(g).setHandler(function(c){d("ChatPluginSendMessage").commit(b,{input:{client_mutation_id:a.otid,message_text:a.body,platform_token:a.platformToken,page_id:f.pageID,image_attachment_ids:(c=a.attachmentIds)==null?void 0:c.images,video_attachment_ids:(c=a.attachmentIds)==null?void 0:c.videos,gif_attachment_ids:(c=a.attachmentIds)==null?void 0:c.gifs,file_attachment_ids:(c=a.attachmentIds)==null?void 0:c.files,logging_extra:JSON.stringify(i)}},{onSuccess:function(a){a=f.pendingMessages.first();f.pendingMessages=f.pendingMessages.slice(1);f.serverPartialMessages=f.serverPartialMessages.push(babelHelpers["extends"]({},a,{state:d("MessagingPluginPendingMessageState").SENT}));f.updateMessageStoreCallback&&f.updateMessageStoreCallback();f.sendNext(b,e)},onFailure:function(c){var g=h.TEXT;try{if(a.platformToken!=null){var i=JSON.parse(a.platformToken);(i==null?void 0:i.postback)!=null?g=h.POSTBACK:(i==null?void 0:i.quick_reply)!=null&&(g=h.QUICK_REPLY)}}catch(a){}d("LiveChatPluginLoggerUtil").logNewImpressionEvents("customer_chat_guest_message_send_failed",f.pageID,null,null,JSON.stringify({error:c,message_type:g}));i=f.pendingMessages.first();f.pendingMessages=f.pendingMessages.slice(1);f.failedMessages=f.failedMessages.push(babelHelpers["extends"]({},i,{state:d("MessagingPluginPendingMessageState").FAILED}));f.updateMessageStoreCallback&&f.updateMessageStoreCallback();f.sendNext(b,e)}})}).send()};b.makeOfflineThreadingID=function(){var a=Date.now(),b=d("Random").uint32();a=a&2147483647;a=a*Math.pow(2,21);b=(b&2097151)+a;return b.toString()};return a}();g["default"]=a}),98);
__d("XChatPluginLabelThreadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/plugin/customer_chat/label_thread/",{page_id:{type:"FBID",required:!0},user_id:{type:"FBID",required:!0},access_token:{type:"String"}})}),null);
__d("LiveChatMessageStore",["Arbiter","AsyncRequest","LiveChatPluginConstants","LiveChatPluginLoggerUtil","LivechatPluginGuestMessageThreadQueryContainer.react","MercuryIDs","MercuryMessageStore","MercurySyncDeltaTypes","MercurySyncNewMessageTransformer","MercurySyncReadReceiptTransformer","MercuryThreadlistConstants","MessagingPluginGraphQLUtils","MessagingPluginPendingMessageState","MessagingPluginSendQueue","MessengerMQTTConnectionEvents","Sound","SubscriptionsHandler","UserActivity","XChatPluginLabelThreadController","immutable","mixInEventEmitter","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e,f,g,h){this.$5=b||d("LiveChatPluginConstants").LOGGED_IN_CHAT_MODE,this.$4=a,this.$1=e,this.$2=f,this.$7=c("immutable").List(),this.$8=c("immutable").List(),this.$10=null,this.$9={action:0,watermark:0},this.$12=new Set(),this.$11=g,this.$13=h,this.$14=!1,this.$5===d("LiveChatPluginConstants").LOGGED_IN_CHAT_MODE?this.$15():this.$16()}var b=a.prototype;b.$17=function(a){var b=d("MercurySyncNewMessageTransformer").transform(this.$1,a);a["class"]==c("MercurySyncDeltaTypes").AdminTextMessage&&(b=babelHelpers["extends"]({},b,{action_type:"ma-type:log-message",log_message_body:a.messageMetadata.adminText}));return b};b.$18=function(a){var b=this.$7||c("immutable").List();b=b.push(a);var d=new Map();b.forEach(function(a){d.set(a.offline_threading_id,a)});var e=c("immutable").List();d.forEach(function(a){e=e.push(a)});return e};b.$15=function(){var a=this;this.$6&&this.$6.destroy();this.$3&&this.$3.release();this.$6=new(c("MercuryMessageStore"))(this.$4,null,this.$1);this.$3=new(c("SubscriptionsHandler"))();if(this.$3==null||this.$6==null)return;this.$3.addSubscriptions(this.$6.subscribe(function(b){var d=c("immutable").List(b.messages.sort(function(a,b){return a.timestamp-b.timestamp})),e=a.$7||c("immutable").List(),f=new Map();e.forEach(function(a){f.set(a.offline_threading_id,a)});d.forEach(function(a){f.set(a.offline_threading_id,a)});var g=c("immutable").List();f.forEach(function(a){g=g.push(a)});a.$7=g;a.$19(b.eventType)}));this.$3.addSubscriptions(c("Arbiter").subscribe(d("MessengerMQTTConnectionEvents").DELTA_EVENT,function(b,e){b=e.obj.delta;if(b["class"]===c("MercurySyncDeltaTypes").NewMessage||b["class"]===c("MercurySyncDeltaTypes").AdminTextMessage){e=a.$17(b);if(!a.$14&&e.action_type==="ma-type:user-generated-message"){b=c("XChatPluginLabelThreadController").getURIBuilder().setFBID("page_id",a.$2).setFBID("user_id",a.$1).getURI();new(c("AsyncRequest"))().setURI(b).send();a.$14=!0}a.$7=a.$18(e);a.$19(d("LiveChatPluginConstants").NEW_MESSAGE_UPDATE)}}))};b.$16=function(){var a=this;this.$6&&this.$6.destroy();this.$3&&this.$3.release();this.$3=new(c("SubscriptionsHandler"))();if(this.$3==null)return;this.$3.addSubscriptions(c("Arbiter").subscribe(d("MessengerMQTTConnectionEvents").DELTA_EVENT,function(b,e){b=e.obj.delta;d("LiveChatPluginLoggerUtil").logDelta(a.$1,a.$2,b["class"],b.seqID,!0);if(b["class"]!==c("MercurySyncDeltaTypes").NewMessage&&b["class"]!==c("MercurySyncDeltaTypes").ReadReceipt&&b["class"]!==c("MercurySyncDeltaTypes").MarkRead&&b["class"]!==c("MercurySyncDeltaTypes").AdminTextMessage)return;a.$20(b)}));this.$21()};b.$20=function(a){switch(a["class"]){case c("MercurySyncDeltaTypes").ReadReceipt:var b=d("MercurySyncReadReceiptTransformer").transform(a);b=b.roger[this.$2][this.$2];this.$9=b;break;case c("MercurySyncDeltaTypes").MarkRead:this.$10=0;this.$12.clear();c("Arbiter").inform(d("LiveChatPluginConstants").UNREAD_COUNT_UPDATE,0);break;default:b=this.$17(a);this.$22(b);b.author!=d("MercuryIDs").getParticipantIDFromUserID(this.$1)&&!this.$12.has(b.message_id)&&a["class"]===c("MercurySyncDeltaTypes").NewMessage&&(this.$10!=null?this.$10+=1:this.$10=1,this.$12.add(b.message_id),c("Arbiter").inform(d("LiveChatPluginConstants").UNREAD_COUNT_UPDATE,this.$10),this.$23(b.timestamp));if(!this.$14&&b.action_type==="ma-type:user-generated-message"){a=c("XChatPluginLabelThreadController").getURIBuilder().setString("access_token",this.$13).setFBID("page_id",this.$2).setFBID("user_id",this.$1).getURI();new(c("AsyncRequest"))().setURI(a).send();this.$14=!0}a=this.$7||c("immutable").List();a=a.push(b);var e=new Map();a.forEach(function(a){e.set(a.message_id,a)});var f=c("immutable").List();e.forEach(function(a){f=f.push(a)});this.$7=f;this.$19(d("LiveChatPluginConstants").NEW_MESSAGE_UPDATE);return}};b.$21=function(){var a=this;d("LivechatPluginGuestMessageThreadQueryContainer.react").LivechatPluginGuestMessageThreadQueryFetchOnce(this.$2,function(b){var e;a.$9=(e=a.$9)!=null?e:d("MessagingPluginGraphQLUtils").getLatestReadReceiptFromGraphQLResponse(b);e=d("MessagingPluginGraphQLUtils").getGuestThreadUnreadCount(b);a.$10===null&&e!=null&&(a.$10=e,c("Arbiter").inform(d("LiveChatPluginConstants").UNREAD_COUNT_UPDATE,a.$10));e=d("MessagingPluginGraphQLUtils").getMercuryPayloadFromGraphQLResponse(b);e=e||c("immutable").List();var f=new Map();e=e.concat(a.$7);e.forEach(function(a){f.set(a.message_id,a)});var g=c("immutable").List();f.forEach(function(b){!a.$14&&b.action_type==="ma-type:user-generated-message"&&(a.$14=!0),a.$22(b),g=g.push(b)});a.$7=g;c("setTimeout")(function(){a.$19(d("LiveChatPluginConstants").INITIAL_FETCH)},1e3)})};b.getMessageListWithOptimisticMessages=function(){var a=this;if(!this.sendQueue)return this.$7;var b=this.sendQueue.getOptimisticMessages(),c=b.filter(function(b){var c=a.$7.find(function(a){return a.offline_threading_id===b.otid});return c!=null});b=b.filter(function(a){var b=c.find(function(b){return b.otid===a.otid});return!b});this.sendQueue&&this.sendQueue.confirmServerPartialMessages(c);b=b.map(function(a){return a.state===d("MessagingPluginPendingMessageState").FAILED?a:babelHelpers["extends"]({},a,{timestamp:a.timestamp+6e5})});b=d("MessagingPluginGraphQLUtils").getMercuryPayloadFromOptimisticMessage(b,this.$1,this.$2);return this.$7.concat(b).sort(function(a,b){return a.timestamp-b.timestamp})};b.setUpGuestMessageSendQueue=function(a){this.sendQueue=new(c("MessagingPluginSendQueue"))(this.$2,this.$1,a,this.optimisticSendUpdateCallback.bind(this))};b.destroy=function(){this.$6&&this.$6.destroy(),this.$3&&this.$3.release(),this.$7=c("immutable").List()};b.subscribe=function(a){return this.addRetroactiveListener("messageUpdate",a)};b.fetchMoreMessages=function(){return this.$5===d("LiveChatPluginConstants").LOGGED_IN_CHAT_MODE?this.$6!=null&&this.$6.fetchMoreMessages():!1};b.hasFetchedAll=function(){return this.$5===d("LiveChatPluginConstants").LOGGED_IN_CHAT_MODE?this.$6!=null&&this.$6.hasFetchedAll()||this.$7.size>=d("MercuryThreadlistConstants").RECENT_MESSAGES_LIMIT:!0};b.optimisticSendUpdateCallback=function(){this.$19(d("LiveChatPluginConstants").NEW_MESSAGE_UPDATE)};b.getLatestReadReceipt=function(){return this.$9};b.$23=function(a){if(!c("UserActivity").isOnTab()){var b,e;b=(b=this.$11)==null?void 0:b.get("sound.notif_ogg_url");e=(e=this.$11)==null?void 0:e.get("sound.notif_mp3_url");b!=null&&e!=null&&d("Sound").play([b,e],a,!1)}};b.$22=function(a){a.timestamp>this.$9.action&&a.author!=d("MercuryIDs").getParticipantIDFromUserID(this.$1)&&(this.$9.action=a.timestamp,this.$9.watermark=a.timestamp)};b.$19=function(a){var b=this.getMessageListWithOptimisticMessages();this.$8=b;this.releaseHeldEventType("messageUpdate");this.emitAndHold("messageUpdate",{messages:b,eventType:a})};return a}();c("mixInEventEmitter")(a,{messageUpdate:!0});g["default"]=a}),98);
__d("MPNThreadViewActions",["DOM","LiveChatPluginFbts","MPNMessageListDataHelper","MPNXDMessageManager","ReactDOM","UserActivity"],(function(a,b,c,d,e,f,g){"use strict";a={maybeUpdateAutomationState:function(a,b){var c=a.context.state.hasActiveAutomation;if(d("MPNMessageListDataHelper").shouldEnterEscalationFlow(b)&&c){a.context.dispatchAction({type:"TOGGLE_HAS_ACTIVE_AUTOMATION",hasActiveAutomation:!1});return}b=d("MPNMessageListDataHelper").maybeFetchMessagePlatformXMD(b,a.state.userID);(b==null?void 0:b.message_classification)==="chat_plugin_automation"&&!c&&a.context.dispatchAction({type:"TOGGLE_HAS_ACTIVE_AUTOMATION",hasActiveAutomation:!0})},handleImageLoad:function(a){c("DOM").scry(d("ReactDOM").findDOMNode(a),"img").forEach(function(b){if(b.complete)return;var c=Event.listen(b,"load",function(){a.scrollToBottom(),c.remove()})})},setTabNotification:function(a){a=d("LiveChatPluginFbts").getTabTitle(a).toString();c("MPNXDMessageManager").setTabNotification(a);c("UserActivity").subscribeOnce(function(){c("MPNXDMessageManager").setTabNotification(null)})}};b=a;g["default"]=b}),98);
__d("MPNThreadViewSubscriptions",["Arbiter","ChatPluginThreadLoadQplLogger","LiveChatPluginConstants","LiveChatPluginLoggerUtil","MPNConstants","MPNIdentity","MPNStorage","MercuryIDs","MessagingPluginGuestUpgradeActions","SubscriptionsHandler","clearTimeout","immutable"],(function(a,b,c,d,e,f,g){"use strict";var h=4e3;a=function(){function a(a,b,c){this.$2=b,this.$1=a,this.$5=c}var b=a.prototype;b.initialize=function(){this.$3=new(c("SubscriptionsHandler"))(),this.$3.addSubscriptions(this.$6(),this.$7(),this.$8())};b.tearDown=function(){var a;(a=this.$2)==null?void 0:a.destroy();(a=this.$3)==null?void 0:a.release();c("clearTimeout")(this.$4)};b.$6=function(){var a=this;return c("Arbiter").subscribe(d("LiveChatPluginConstants").TYPING_UPDATE,function(b,c){b=!!c;b!==a.$1.state.typing&&(a.$1.setState({typing:b}),b&&(a.$4=window.setTimeout(function(){a.$1.setState({typing:!1})},15e3)))})};b.$7=function(){var a=this;return c("Arbiter").subscribe(d("LiveChatPluginConstants").STATE_UPDATE,function(b,d){b=null;d!==a.$1.state.connectionState&&(a.$1.setState({connectionState:d},function(){a.$1.handleConnectionStateChange()}),c("clearTimeout")(b),b=window.setTimeout(function(){a.$1.setState({showConnectionBanner:!0})},h))})};b.$8=function(){var a=this;return this.$2.subscribe(function(b){a.$1.setState(function(e){var f=c("immutable").List(b.messages.sort(function(a,b){return a.timestamp-b.timestamp}));!a.$1.context.state.threadExists&&f.size>=1&&a.$1.context.dispatchAction({type:"UPDATE_THREAD_EXISTS"});var g=d("MessagingPluginGuestUpgradeActions").shouldShowUpgradePrompt(a.$5,f,b.eventType,a.$1);g!==d("MPNConstants").MPNUpgradePrompt.NOT_SHOWN&&g!==a.$1.context.state.optimisticStorageState.showUpgradePromptType&&(c("MPNStorage").setShowUpgradePrompt(g),a.$1.context.dispatchAction({type:"UPDATE_UPGRADE_UPSELL_PROMPT",upgradeUpsellPrompt:g}));g={};f.get(-1)!=null&&f.get(-1).author!=null&&c("MercuryIDs").getUserIDFromParticipantID(f.get(-1).author)!==d("MPNIdentity").MPNIdentity.currentUserID()&&e.typing&&(a.$4&&c("clearTimeout")(a.$4),g.typing=!1);e=e.hasLoggedImpression;e==!1&&a.$2!=null&&a.$2.hasFetchedAll()&&(a.$9(),e=!0);return babelHelpers["extends"]({messages:f,readReceipt:(f=a.$2)==null?void 0:f.getLatestReadReceipt(),shouldShowWelcomeMessage:!0,hasLoggedImpression:e},g)})})};b.$9=function(){var a=d("MPNIdentity").MPNIdentity.currentUserID(),b=this.$1.context.state,c=b.pageID,e=b.continueClickTime,f=b.pluginMountTime;b=b.showUpgradeUpsellPrompt;d("ChatPluginThreadLoadQplLogger")==null?void 0:d("ChatPluginThreadLoadQplLogger").logChatPluginThreadLoadModuleEndSuccess();d("LiveChatPluginLoggerUtil").logImpressionUsingFalco(c,d("MPNIdentity").MPNIdentity.currentUserState()===d("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":b?"guest_chat_tab_with_upgrade_enabled":"guest_chat_tab",(c=e)!=null?c:f,null,null,null,a,null,null,{isClickTimeNull:e==null})};return a}();g["default"]=a}),98);
__d("MessagingPluginDialogConnectionBanner.react",["cx","fbt","LiveChatPluginConstants","MessengerSpinner.react","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");function a(a){var b=a.showConnectionBanner,e=a.connectionState;a=a.handleConnectionBannerStateChange;if(!b||navigator.userAgent.includes("Firefox"))return null;b=null;switch(e){case d("LiveChatPluginConstants").MQTTGatewayConnectionState.CONNECTED:b=null;a();break;case d("LiveChatPluginConstants").MQTTGatewayConnectionState.CONNECTING:b=j.jsxs("div",{className:"connecting",children:[j.jsx(c("MessengerSpinner.react"),{className:"connectingSpinner",color:"grey"}),i._(/*FBT_CALL*/"Connecting\u2026"/*FBT_CALL*/)]});break;case d("LiveChatPluginConstants").MQTTGatewayConnectionState.DISCONNECTED:b=j.jsx("div",{className:"disconnected",children:i._(/*FBT_CALL*/"No Internet Connection"/*FBT_CALL*/)});break}return b&&j.jsx("div",{className:"_2oap",children:b},"connection_banner")}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MessagingPluginDialogBody.react",["cx","Arbiter","LiveChatMessageStore","LiveChatPluginConstants","LiveChatPluginLoggerUtil","LiveChatPluginTypingIndicator.react","MPNConstants","MPNIcebreakersGroup.react","MPNIdentity","MPNLocalState","MPNMessageList.react","MPNQuickRepliesGroup.react","MPNStorage","MPNThreadViewActions","MPNThreadViewSubscriptions","MPNXDMessageManager","MercuryIDs","MessagingPluginContext","MessagingPluginDialogConnectionBanner.react","MessagingPluginThreadActions","MessengerDeliveryReceipt.bs","MessengerScrollableArea.react","ReactDOM","clearTimeout","cr:878","immutable","react","setTimeout"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=35,k=4e3;a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.state={connectionState:d("LiveChatPluginConstants").MQTTGatewayConnectionState.CONNECTED,messages:c("immutable").List(),quickRepliesOffset:0,readReceipt:null,showConnectionBanner:!1,typing:!1,shouldShowWelcomeMessage:!1,unreadCount:0,userID:d("MPNIdentity").MPNIdentity.currentUserID(),hasLoggedImpression:!1},e.$2=!1,e.$3=0,e.$4=0,e.$7="",e.$10=null,e.hasShownOneUpgradePrompt=!1,e.hasGuestMessaged=null,e.$16=function(a,b){var c=e.$14();if(!c)return;var d=c.getScrollOffsetForElement(a);a=d+a.offsetHeight;var f=c.getScrollTop(),g=f+c.getClientHeight();a=a-g;if(d<=f){g=b?Math.max(0,d-30):d;c.setScrollTop(g,!0)}else a>-15&&a<36&&c.setScrollTop(f+Math.abs(a)+15,!0)},b)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f.componentDidMount=function(){var a=this,b=this.context.state,e=b.pageID,f=b.pageName;this.$2=!0;this.$7=d("MercuryIDs").getThreadIDFromUserID(e);this.$13();this.$10=c("Arbiter").subscribe(d("LiveChatPluginConstants").UNREAD_COUNT_UPDATE,function(b,d){a.setState({unreadCount:d}),c("MPNThreadViewActions").setTabNotification(f)})};f.componentWillUnmount=function(){var a;this.$2=!1;(a=this.$12)==null?void 0:a.tearDown();this.$10&&c("Arbiter").unsubscribe(this.$10);this.$11&&c("clearTimeout")(this.$11);this.context.state.hasActiveAutomation&&this.context.dispatchAction({type:"TOGGLE_HAS_ACTIVE_AUTOMATION",hasActiveAutomation:!1})};f.UNSAFE_componentWillUpdate=function(){var a=this.$14();a&&(this.$3=a.getScrollHeight(),this.$4=a.getScrollTop())};f.componentDidUpdate=function(a,b){var e;a=d("MPNIdentity").MPNIdentity.currentUserID();(this.state.userID!==a||this.context.state.messageStore==null)&&(this.setState({userID:a}),this.$13());c("MPNThreadViewActions").maybeUpdateAutomationState(this,this.state.messages);((e=c("MPNStorage").getFBStorageState())==null?void 0:e.visibility)===d("MPNConstants").MPNVisibility.NOT_HIDDEN&&this.state.unreadCount>0&&(d("MessagingPluginThreadActions").markThreadAsRead(this.context),this.setState({unreadCount:0}),c("MPNXDMessageManager").setTabNotification(null));e=this.$14();var f=d("ReactDOM").findDOMNode(this);if(!f||!(f instanceof HTMLElement)||a==null)return;f=f.clientHeight;if(this.$1){var g=d("ReactDOM").findDOMNode(this.$1);g&&g instanceof HTMLElement&&(this.state.quickRepliesOffset!==f-g.clientHeight&&this.setState({quickRepliesOffset:f-g.clientHeight}))}if(!e)return;f=this.state.messages!==b.messages&&this.state.messages.last()!==b.messages.last()&&!this.state.messages.isEmpty()&&this.state.messages.last().author===d("MercuryIDs").getParticipantIDFromUserID(a);if(f)this.scrollToBottom(),c("MPNThreadViewActions").handleImageLoad(this);else{g=e.getScrollHeight();if(g!==this.$3){b=g-this.$3+this.$4;this.$5&&this.$5.scrollToPosition(b)}else c("MPNThreadViewActions").handleImageLoad(this)}if(this.$8){a=d("ReactDOM").findDOMNode(this.$8);a instanceof HTMLElement&&e.distanceToBottom()<=1.25*a.offsetHeight?e.scrollToBottom(!0):a&&(this.$5&&this.$5.scrollToPosition(this.$4))}};f.render=function(){var a=this,e=this.context.state.pageID;try{var f;return i.jsxs(i.Fragment,{children:[i.jsx(c("MessagingPluginDialogConnectionBanner.react"),{showConnectionBanner:this.state.showConnectionBanner,connectionState:this.state.connectionState,handleConnectionBannerStateChange:function(){return a.setState({showConnectionBanner:!1})}}),i.jsx(c("MessengerScrollableArea.react"),{height:this.$15(),ref:function(b){a.$5=b},tabIndex:0,children:i.jsxs("div",{ref:function(b){a.$1=b},children:[i.jsx("div",{className:"preventScrollOverflow",children:i.jsxs("div",{className:"conversationContainer",children:[i.jsx(c("MPNMessageList.react"),{connectionState:this.state.connectionState,deliveryTimestamp:d("MessengerDeliveryReceipt.bs").getDeliveryTimeOfThread(this.props.deliveryReceipt,this.$7),messages:this.state.messages,shouldShowWelcomeMessage:this.state.shouldShowWelcomeMessage,readReceipt:(f=this.state.readReceipt)!=null?f:(f=this.$6)==null?void 0:f.getLatestReadReceipt(),scrollIntoView:this.$16,setFeedback:this.props.setFeedback}),i.jsx(c("LiveChatPluginTypingIndicator.react"),{pageIsTyping:this.state.typing,ref:function(b){a.$8=b}})]})}),i.jsxs("div",{style:{position:"relative",top:Math.max(this.state.quickRepliesOffset,0)},children:[i.jsx(c("MPNQuickRepliesGroup.react"),{messages:this.state.messages,userID:this.state.userID}),i.jsx(c("MPNIcebreakersGroup.react"),{threadID:this.$7,messages:this.state.messages,store:this.$6})]})]})},"scrollable_area")]})}catch(a){f=this.context.state.showUpgradeUpsellPrompt;d("LiveChatPluginLoggerUtil").logImpressionExceptionsFromNewUI("tab_load_failure",e,d("MPNIdentity").MPNIdentity.currentUserState()===d("MPNIdentity").MPNIdentityState.FB?"logged_in_chat_tab":f?"guest_chat_tab_with_upgrade_enabled":"guest_chat_tab",a.name,a.message,a.stack);b("cr:878")==null?void 0:b("cr:878").logChatPluginThreadLoadModuleEndFail();return null}};f.$13=function(){var a;(a=this.$12)==null?void 0:a.tearDown();this.setState({hasLoggedImpression:!1});a=d("MPNIdentity").MPNIdentity.currentUserID();if(a==null)return;if(this.context.state.optimisticStorageState.chatState==d("MPNLocalState").MPNChatState.CHAT_NOT_STARTED)return;var b=this.context,e=b.state;b=b.dispatchAction;var f=d("MPNIdentity").MPNIdentity.currentUserState();f=f===d("MPNIdentity").MPNIdentityState.FB?d("LiveChatPluginConstants").LOGGED_IN_CHAT_MODE:f===d("MPNIdentity").MPNIdentityState.GUEST?d("LiveChatPluginConstants").GUEST_CHAT_MODE:d("LiveChatPluginConstants").INVALID_CHAT_MODE;e=f===d("LiveChatPluginConstants").GUEST_CHAT_MODE?e.accessToken:e.loggedInAccessToken;a=new(c("LiveChatMessageStore"))(this.$7,f,a,this.context.state.pageID,this.context.state.soundURLs,e);this.$6=a;b({type:"SET_UP_MESSAGE_STORE",messageStore:this.$6});a.setUpGuestMessageSendQueue(e);this.$12=new(c("MPNThreadViewSubscriptions"))(this,a,f);this.$12.initialize()};f.$14=function(){return this.$5&&this.$5.getArea()};f.scrollToBottom=function(){this.$5&&this.$5.scrollToBottom()};f.$17=function(){var a=d("ReactDOM").findDOMNode(this);return a&&a.parentNode&&a.parentNode instanceof HTMLElement?a.parentNode.getBoundingClientRect().height+"px":"100%"};f.$15=function(){var a;!this.context.state.isMobile?a="100%":a=(this.props.dialogBodyHeight===-1?this.$17():this.props.dialogBodyHeight)+"px";this.state.showConnectionBanner&&!navigator.userAgent.includes("Firefox")&&(a=a==="100%"?"91%":Math.max(parseInt(a,10)-j,0).toString()+"px");return a};f.handleConnectionStateChange=function(){var a=this;c("setTimeout")(function(){a.scrollToBottom()},k)};return e}(i.PureComponent);a.contextType=c("MessagingPluginContext");g["default"]=a}),98);